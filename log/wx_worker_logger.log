2016-04-28 10:57:18 INFO menu controller index action.....
2016-04-28 14:45:17 INFO WxMenusController index action begin...
2016-04-28 14:45:17 INFO #<WxArticle::ActiveRecord_AssociationRelation:0x007fd988c4fd38>
2016-04-28 14:46:17 INFO WxMenusController index action begin...
2016-04-28 14:46:18 INFO [{"id":242,"title":"Test3633","author":"liug","digest":"联创亚信科技(南京)有限公司","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cp\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e（V1.0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e密级：机密\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e联创亚信科技(南京)有限公司\u003c/p\u003e\u003cp\u003e2012年3月\u003c/p\u003e\u003cp\u003e文 档 信 息\u003c/p\u003e\u003cp\u003e文 档 名 称\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e归 档 部 门\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文 档 编 号:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eAILK-NBS-DATA-STD-003\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003c/p\u003e\u003cp\u003e文 档 变 更 记 录\u003c/p\u003e\u003cp\u003e版 本 编 号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版 本 日 期\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e作 者\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e说 明\u003c/p\u003e\u003cp\u003eV1.0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2012-3-23\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e胡元皓、沙先伟、李开衡、翟高星、薛建江\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e初稿\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e审 核\u003c/p\u003e\u003cp\u003e审核组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e审核代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e批 准\u003c/p\u003e\u003cp\u003e批准组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e批准代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目 录\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e6\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e15\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e16\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e19\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e20\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e23\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e26\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e30\u003c/p\u003e\u003cp\u003e2.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e40\u003c/p\u003e\u003cp\u003e2.2.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e46\u003c/p\u003e\u003cp\u003e2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e内存数据库\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e配置文件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e48\u003c/p\u003e\u003cp\u003e2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信告警\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e49\u003c/p\u003e\u003cp\u003e2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e附件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e2.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台程序相关总表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理和自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e60\u003c/p\u003e\u003cp\u003e3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e65\u003c/p\u003e\u003cp\u003e4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e76\u003c/p\u003e\u003cp\u003e5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信开通\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e130\u003c/p\u003e\u003cp\u003e5.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e150\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中${HOME}非特殊说明下，均指lcims用户的主目录。\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中非特殊说明下，均是指以lcims用户登录进行维护。\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003eRadius1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003eRadius2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003c/p\u003e\u003cp\u003e2.1.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/bin：存放radius可执行程序，启停脚本，监控脚本，模拟发包脚本\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/config：存放radius相关配置文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/log：存放radius产生的日志文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/radacct：存放radius产生的原始话单文件\u003c/p\u003e\u003cp\u003e2.1.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius进程运行说明\u003c/p\u003e\u003cp\u003e一套完整的radius程序主要由rad_collect、roam_collect、RadiusServer三组进程组成，它们分工协作，共同完成radius包的采集，解析，处理，转发，回包等工作。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e${HOME}/lcims70/radius/bin\u003c/p\u003e\u003cp\u003eUDP包采集与写消息队列执行程序：\u003c/p\u003e\u003cp\u003erad_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e指定端口UDP包采集与预处理执行程序\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e采集的端口号根据配置文件（radmsg.cfg）的内容指定\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e如：rad_collect 1为采集radmsg.cfg中端口组号为1\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e的端口\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e注：关于radmsg.cfg的配置具体看下面的说明。\u003c/p\u003e\u003cp\u003eroam_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e所有radius进程的漫游端口上的UDP包采集与预处理执行程序。\u003c/p\u003e\u003cp\u003erad_killmsg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e清除消息队列执行程序\u003c/p\u003e\u003cp\u003eRADIUS认证与计费执行程序：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003eRadiusServer\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS主执行程序\u003c/p\u003e\u003cp\u003eRadiusVPDN\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eVPDN代维系统主执行程序\u003c/p\u003e\u003cp\u003estartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动RADIUS批执行程序\u003c/p\u003e\u003cp\u003estopradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e停止RADIUS批执行程序\u003c/p\u003e\u003cp\u003erestartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e重启RADIUS批执行程序\u003c/p\u003e\u003cp\u003eradsend\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS测试发包程序\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eRADIUS自监控执行程序：\u003c/p\u003e\u003cp\u003emsgcount\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e： 消息队列监控程序\u003c/p\u003e\u003cp\u003elcims_alarm \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e： RADIUS告警程序\u003c/p\u003e\u003cp\u003e2.1.3.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer的参数说明\u003c/p\u003e\u003cp\u003e-1 ～ -9 表示从哪个消息读取数据包，1～9对应radmsg.cfg中的消息队列号\u003c/p\u003e\u003cp\u003e-b表示关闭logfile日志文件\u003c/p\u003e\u003cp\u003e-x表示打开x_debug.log日志文件\u003c/p\u003e\u003cp\u003e-j表示此server为计费server\u003c/p\u003e\u003cp\u003e-U表示此server为认证直通\u003c/p\u003e\u003cp\u003e-V表示此server为计费直通。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius日志说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/log\u003c/p\u003e\u003cp\u003einfo_auth*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e认证RADIUS启停log，每个认证RadiusServer产生一个\u003c/p\u003e\u003cp\u003einfo_acct*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e计费RADIUS启停log，每个计费RadiusServer产生一个\u003c/p\u003e\u003cp\u003eauth1645.msg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e消息队列log\u003c/p\u003e\u003cp\u003eerror_info\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eRADIUS SERVER重起信息log\u003c/p\u003e\u003cp\u003eradius$date_[1-5]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e认证RADIUS运行日志\u003c/p\u003e\u003cp\u003eradius$date_[6-8]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e计费RADIUS运行日志\u003c/p\u003e\u003cp\u003eauthok.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证成功的用户信息\u003c/p\u003e\u003cp\u003eauthfail.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证失败的用户信息\u003c/p\u003e\u003cp\u003eerrorpacket.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eRADIUS SERVER的每天被丢弃的错包信息\u003c/p\u003e\u003cp\u003e2.1.3.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius的detail文件说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/radacct\u003c/p\u003e\u003cp\u003eacct.（date）(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e文本方式的用户计费信息文件\u003c/p\u003e\u003cp\u003eerracct.(date)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e异常情况下未计费的用户detail文件\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e二进制方式用户计费信息文件\u003c/p\u003e\u003cp\u003e处理说明：\u003c/p\u003e\u003cp\u003eerracct.(date)(pid)文件计费子系统会回收的。\u003c/p\u003e\u003cp\u003eacct.(date)(pid)文件是用户上网情况的原始记录，可用户查询也可用于重计费。\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 文件计费进程读该文件。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/config\u003c/p\u003e\u003cp\u003e2.1.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003esysconfig\u003c/p\u003e\u003cp\u003e文件名：sysconfig\u003c/p\u003e\u003cp\u003e作用：Radius系统配置文件\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e#数据库的连接出现问题时，是否直接让帐号用户认证通过\u003c/p\u003e\u003cp\u003edirectpass = no\u003c/p\u003e\u003cp\u003e#省内NAS SECRET\u003c/p\u003e\u003cp\u003elocalsecret = xxxxxx\u003c/p\u003e\u003cp\u003e#省内域名\u003c/p\u003e\u003cp\u003elocalrealm = js.cn\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e#RadiusServer的服务类型是宽带还是窄带等\u003c/p\u003e\u003cp\u003e#类型有：\u003c/p\u003e\u003cp\u003e#narrowband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e窄带\u003c/p\u003e\u003cp\u003e#broadband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e宽带\u003c/p\u003e\u003cp\u003e#ALL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e宽窄带合一\u003c/p\u003e\u003cp\u003eService = ALL\u003c/p\u003e\u003cp\u003e#默认域名（即没有注册的域名）允许的被叫\u003c/p\u003e\u003cp\u003eDefault_Called = 163,17999,179,16300,16306,16388,169,1183300,9163\u003c/p\u003e\u003cp\u003e#用户默认的最大上网时长\u003c/p\u003e\u003cp\u003eTimeout = 8640000\u003c/p\u003e\u003cp\u003e#用户默认的最大上网流量（K为单位）\u003c/p\u003e\u003cp\u003eFlowout = 1073741824\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e#交换机地址\u003c/p\u003e\u003cp\u003e\u0026nbsp;alteon1 = 192.168.53.1\u003c/p\u003e\u003cp\u003ealteon2 = 192.168.53.2\u003c/p\u003e\u003cp\u003ealteon3 = 192.168.53.3\u003c/p\u003e\u003cp\u003e#是否文件计费\u003c/p\u003e\u003cp\u003eFileAcct = yes\u003c/p\u003e\u003cp\u003e#文件计费记录文件\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/OnlineConfig.ini\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/RatingConfig.ini\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile\u003c/p\u003e\u003cp\u003e文件名：authfile\u003c/p\u003e\u003cp\u003e作用：域名配置文件。配置域名的认证类型和转发地址，其中认证类型有：\u003c/p\u003e\u003cp\u003eDATABASE:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e表示本地认证\u003c/p\u003e\u003cp\u003eRADIUS\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e表示漫游认证\u003c/p\u003e\u003cp\u003eDeny\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; 表示拒绝认证\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e域名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e处理AATV\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e地址\u003c/p\u003e\u003cp\u003eNULL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;DEFAULT \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;peap.com \u0026nbsp; \u0026nbsp; \u0026nbsp; RADIUS \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; 221.130.120.179\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e注：现在域名信息一般通过业务系统存放在数据库中BD_AUTHTYPE表中，此文件中域名配置优先级高于BD_AUTHTYPE。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的域名配置文件。该文件格式跟authfile.abn一样，包括authfile文件和数据库中的所有的域名信息，每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients\u003c/p\u003e\u003cp\u003e作用：客户端(NAS,PROXY RADIUS)配置文件。通常用来配置漫游转发设备的地址信息。现在本地客户端信息通过业务系统存放在数据库中BD_NAS表中，而漫游的地址必须存放在此文件中。如果有新的客户端要加入，请在加入后重新启动radius进程。\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp; 源地址\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e密钥\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e类型\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e版本\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; 127.0.0.1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003exxxxx \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003etype = nas \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003ev1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的客户端(NAS,PROXY RADIUS)配置文件。该文件格式跟clients一样，包括clients文件和数据库中所有的设备地址信息。此文件每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eradmsg.cfg\u003c/p\u003e\u003cp\u003e作用：消息队列配置文件。rad_collect和RadiusServer启动时，从该文件读取消息队列配置信息。\u003c/p\u003e\u003cp\u003e消息队列号：对应于每个RadiusServer启动参数-M后的数字。起了多少个RadiusServer，就有多少个消息队列号。RadiusServer根据消息队列号去对应的消息队列中读取报文信息进行处理。\u003c/p\u003e\u003cp\u003e采集端口号：程序监听的udp端口号。\u003c/p\u003e\u003cp\u003e端口组号：对应于rad_collect的启动参数，程序启动时监听在该端口组号对应的采集端口号上。有几个不同的端口组号，就对应几个带不同参数的rad_collect进程。\u003c/p\u003e\u003cp\u003e一个rad_collect进程，监听在一个udp端口上，可以将采集到的数据包根据同一个端口组号对应的消息队列号，写入到不同的消息队列中\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e消息队列文件名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e消息队列号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e采集端口号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e端口组号\u003c/p\u003e\u003cp\u003e../config/message1 \u0026nbsp; \u0026nbsp; \u0026nbsp; 1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1812 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e1\u003c/p\u003e\u003cp\u003e../config/message2 \u0026nbsp; \u0026nbsp; \u0026nbsp; 2 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1813 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e2\u003c/p\u003e\u003cp\u003e../config/message11 \u0026nbsp; \u0026nbsp; \u0026nbsp;11 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1645 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e3\u003c/p\u003e\u003cp\u003e../config/message12 \u0026nbsp; \u0026nbsp; \u0026nbsp;12 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1646 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enasfile\u003c/p\u003e\u003cp\u003e作用：本地nas信息配置文件。该文件包含所有本地nas资料，直通时通过此文件读取本地nas信息。此文件每天维护\u003c/p\u003e\u003cp\u003eareano：属地号\u003c/p\u003e\u003cp\u003edevice：设备型号\u003c/p\u003e\u003cp\u003eaccesstype：接入方式，1表示窄带接入，2表示宽带接入\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e#ip\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eareano\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edevice\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eaccesstype\u003c/p\u003e\u003cp\u003e192.168.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e0001\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eLinkage\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e 2\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edictionary\u003c/p\u003e\u003cp\u003e作用：RADIUS SERVER数据字典。记录目前可以处理的RADIUS属性\u003c/p\u003e\u003cp\u003e标准属性的写法\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; Type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eATTRIBUTE \u0026nbsp; \u0026nbsp; \u0026nbsp; NAS-Port \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;5 \u0026nbsp; \u0026nbsp; \u0026nbsp; integer (0, 0)\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e这表示5号标准属性，属性名称为NAS-Port，数据类型为Int，括号中的内容表示在认证成功和认证失败的报文中是否要包括此属性，‘1’表示最多包括一个，‘0’表示不包括，‘*’表示可包含多个，不写默认为（0,0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e厂商的私有属性写法（26号属性）\u003c/p\u003e\u003cp\u003e厂商名.attr\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e \u0026nbsp;type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003eLinkage.attr \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eLcims-User-Type \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;202 \u0026nbsp; \u0026nbsp; integer\u003c/p\u003e\u003cp\u003e此处的厂商名一定要在vendors中定义，见1.4.9\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003evendors\u003c/p\u003e\u003cp\u003e作用：记录目前可处理的厂商属性标识。在业务系统中各类接入设备的供应商都要在此文件中定义\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003eCisco.attr Cisco.value 9 Cisco\u003c/p\u003e\u003cp\u003e这表示在dictionary文件中用Cisco.attr标识的属性和以Cisco.value标识的属性值为Cisco的私有属性（26号属性所带的），9表示为Cisco的厂商代码（可见rfc1700）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eusers\u003c/p\u003e\u003cp\u003e作用：用户基本上网授权属性配置文件。第一栏是用户名，同一行对应的是认证请求条件，通常为密码。下面对应的是在满足认证请求条件的前提下，RadiusServer需要授权给设备的属性列表。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e如：窄带用户网内有权返回\u003c/p\u003e\u003cp\u003eldimstest \u0026nbsp; \u0026nbsp; \u0026nbsp; Password = \u0026quot;test\u0026quot;\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Service-Type = Framed,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Framed-Protocol = PPP,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Session-Timeout = 10\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003c/p\u003e\u003cp\u003e2.1.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的startradius即可启动相应的radius server；执行bin目录下的stopradius可停掉radius server；执行restartradius可重起radius server。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e直通方法：\u003c/p\u003e\u003cp\u003e1. 核对直通所需的各配置文件是否正常。包括：authfile.abn，clients.abn，nasfile；\u003c/p\u003e\u003cp\u003e2. 如果配置文件非正常，或数据与最新内容有出入，则修改配置或重新生成最新配置文件；\u003c/p\u003e\u003cp\u003e3. 修改配置文件sysconfig，directpass = yes 并保存；\u003c/p\u003e\u003cp\u003e4. 重启radius进程。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e检查radius$date_[n]日志，有全部的本地nas信息和域名信息注册资料，并有“Init MSGQ Succeed!”字样，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列检查\u003c/p\u003e\u003cp\u003e在radius前置机任何路径输入ipcs –qo命令，查看消息队列数是否与RadiusServer进程数相等，是否有堵塞情况。若消息队列数与RadiusServer进程数相等，且无堵塞情况，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e使用测试账号模拟发认证包，检查authok和authfail日志，如果有对应记录，且认证结果符合预期，表明该检查结果正确。模拟发计费包后，检查acct文件，如果有对应记录，表明该检查结果正确；检查detail文件，如果文件存在且更新时间为发包时间，则该检查结果正确。\u003c/p\u003e\u003cp\u003e三步检查都成功，表明radius进程启动成功。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003c/p\u003e\u003cp\u003e2.1.6.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius crontab配置\u003c/p\u003e\u003cp\u003ecrontab设置：\u003c/p\u003e\u003cp\u003e#radius进程、消息队列监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/radius/monitor/monitor_radius.sh \u0026nbsp;\u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/monitor_radius.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时重启radius进程\u003c/p\u003e\u003cp\u003e40 06 * * * ${HOME}/lcims70/radius/bin/restartradius \u0026gt; ${HOME}/lcims70/radius/log/restart.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份detail文件\u003c/p\u003e\u003cp\u003e34 1 * * * ${HOME}/lcims70/radius/monitor/bakdetail.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakdetail.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份日志文件\u003c/p\u003e\u003cp\u003e10 0 * * * ${HOME}/lcims70/radius/monitor/bakradiuslog.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakradiuslog.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时获取直通所需nas和域名信息\u003c/p\u003e\u003cp\u003e22 5 * * * ${HOME}/lcims70/radius/config/getnas.sh \u0026gt; ${HOME}/lcims70/radius/config/nas.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius监控脚本monitor_radius.sh详解\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh流程图\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh阀值说明\u003c/p\u003e\u003cp\u003eMaxBlock：消息队列堵塞个数阀值，默认值30\u003c/p\u003e\u003cp\u003eMsgCheckWait：消息队列下次检查等待时间，默认值3秒\u003c/p\u003e\u003cp\u003eRestartCheckTimes：消息队列连续检查次数阀值，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassCheckTimes：普通重启次数阀值，重启次数超过这个阀值就直通，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassHoldTimes：直通时间阀值，超过这个时间就恢复非直通，默认值5分钟\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius告警并自动重启的条件\u003c/p\u003e\u003cp\u003ea)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞个数超过配置阀值；\u003c/p\u003e\u003cp\u003eb)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包不通或认证失败。\u003c/p\u003e\u003cp\u003e4、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动直通的条件\u003c/p\u003e\u003cp\u003eRadius第一次重启到radius恢复正常（消息队列不堵）之前，重启次数超过配置阀值。\u003c/p\u003e\u003cp\u003e5、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动的从直通中恢复的条件\u003c/p\u003e\u003cp\u003e直通时间大于配置阀值。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius短信告警分析及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞\u003c/p\u003e\u003cp\u003e告警内容举例：”radius01:radius restart1.auth msg block 231”\u003c/p\u003e\u003cp\u003e告警原因：消息队列堵塞，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大量认证包，造成radius进程处理不过来。此种情况一般不会发生；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理缓慢，造成此结果通常有两个原因：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大批量用户资料更新，造成同步程序占用过多磁盘io，导致认证程序取用户资料缓慢；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据库出现问题，造成在线程序取用户在线资料失败或缓慢\u003c/p\u003e\u003cp\u003ec）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e某个RadiusServer进程宕了\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警信息短时间内只收到一条，radius进程已自行重启，无需登录主机查看；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警短信短时间内连续出现，需做以下步骤的检查：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录发生告警的radius主机，检查是否每个RadiusServer进程都在，若有进程消失，说明是radius的问题。重启radius后若同样的错误还是会发生，改直通并联系开发人员查错；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若所有消息队列都在堵塞，登录发生告警的radius主机对应的billing主机，检查认证日志，查看一个认证包的处理时间，若处理时间明显长于平时（毫秒级），继续检查是哪一步占用时间比较长。根据上述分析，通常占用时间长的会是取用户资料或查在线。\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是认证程序取用户资料时间过长，修改同步配置，重启同步配置。修改方法见下文\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是查询在线时间过长，尝试重启在线和认证程序。若还是没效果，启动nodb认证模式，登陆数据库主机检查数据库CPU及磁盘使用情况，确定数据库异常原因，联系相关人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包无回应\u003c/p\u003e\u003cp\u003e告警内容举例：“radius restart 1.auth abnormal”\u003c/p\u003e\u003cp\u003e告警原因：radius监控模拟发包无回应，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer进程宕了；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理时间超过模拟发包软件的超时时间，而造成这一结果的原因与消息队列堵塞原因类似。\u003c/p\u003e\u003cp\u003e处理方法：同消息队列堵塞\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e磁盘空间告警\u003c/p\u003e\u003cp\u003e告警内容举例：“raidust:direcroty:/radius--used:80%s”\u003c/p\u003e\u003cp\u003e告警原因：日志或备份文件过大，导致磁盘剩余空间不足\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查是否有过大文件，如软件安装程序，抓包文件等，若有，则视情况进行清理。查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的radius前缀日志文件，检查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的acct和detail文件。\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查定时清理磁盘脚本，是否没有定时执行。若定时执行，重新评估该脚本是否需要根据实际情况加以修改。\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e从测试机往每台radius前置机的radius/bin目录ftp上传新的RadiusServer程序，上传时更名为RadiusServer.new\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登陆radius前置机，进入radius/bin目录，执行以下操作：\u003c/p\u003e\u003cp\u003emv RadiusServer RadiusServer.${date}\u003c/p\u003e\u003cp\u003emv RadiusServer.new RadiusServer\u003c/p\u003e\u003cp\u003echmod +x RadiusServer\u003c/p\u003e\u003cp\u003erestartradius\u003c/p\u003e\u003cp\u003e其中 ${date} 为更新时间\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e更新后检查\u003c/p\u003e\u003cp\u003e1）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看日志，检查程序启动情况；\u003c/p\u003e\u003cp\u003e2）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包，分别检查正常业务和新版本更新业务。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003c/p\u003e\u003cp\u003e2.1.8.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费系统概述\u003c/p\u003e\u003cp\u003e随着用户数量的不断增加，计费包的数量也不断的加大，原来的计费方式为直接连接计费Server进行计费，一但数据库出现问题或者包数过多的话就会造成计费包丢失，而且由于radius要等待计费Server计费完毕才能回应信息给接入设备，一但超时，接入设备会再次重发计费包，造成计费系统更大的处理负担。\u003c/p\u003e\u003cp\u003e现在准备增加文件缓冲计费的模块，Radius接收到计费包后写入计费文件，然后就给接入设备回应，而文件缓冲计费程序从计费文件中读出计费信息传给计费server进行计费，这样用文件作为缓冲池可以在计费包多的时候先把计费包记录下来，再去计费，不会造成丢包。\u003c/p\u003e\u003cp\u003e由于读取计费文件是实时的计费不会有太长时间的等待，基本可以在几秒内将用户的清单入库。\u003c/p\u003e\u003cp\u003e2.1.8.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate：FileRating程序主目录\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive：FileAlive程序主目录（目前只有江苏电信版本有）\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online：FileOnline程序主目录\u003c/p\u003e\u003cp\u003e其中：\u003c/p\u003e\u003cp\u003ebin：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放可执行程序，启停脚本，监控脚本\u003c/p\u003e\u003cp\u003econfig：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放配置文件\u003c/p\u003e\u003cp\u003elog：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放日志文件\u003c/p\u003e\u003cp\u003e2.1.8.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费进程说明\u003c/p\u003e\u003cp\u003e文件计费进程，由FileOnline，FileRating，FileAlive三个进程组成，分别将radius收到的计费包发送给不同的后台程序进行处理。其中FileOnline和FileRating必须起，FileAlive根据实际情况加以启停。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eFileOnline：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_ONLINE发送计费包，用于生成在线信息；\u003c/p\u003e\u003cp\u003eFileRating：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_RATING发送计费包，用于生成清单信息；\u003c/p\u003e\u003cp\u003eFileAlive：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读取radius产生的计费原始话单，将话单中的起始包，中间包和结束包发送给AB_ALIVE；\u003c/p\u003e\u003cp\u003eFileStatus：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e用于监控文件计费进程处理速度。\u003c/p\u003e\u003cp\u003e2.1.8.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费配置文件配置\u003c/p\u003e\u003cp\u003e配置文件：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/rate/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/alive/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/online/config/system.cfg\u003c/p\u003e\u003cp\u003e作用：文件计费配置文件，配置程序相关路径、日志级别、线程数等。\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e[LOGFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件配置\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/fileacct/rate/log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME =file.log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\u003c/span\u003e#日志文件名\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;LEVEL = NOTE\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\t\u003c/span\u003e#日志级别 （注1）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[RECORDFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件配置 （注2）\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/config\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME = RatingConfig.ini\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#Record配置文件名\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[DATAFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Radius的detail文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/radacct\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[THREADNUM]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e#线程数\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;NUMBER = 4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e注1：日志级别分为ALL、DEBUG、NOTE、WARN、ERROR，一般情况下使用NOTE级别\u003c/p\u003e\u003cp\u003eALL：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印全部日志。\u003c/p\u003e\u003cp\u003eDEBUG：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印调试日志。该日志级别会打印出detail文件中每一个包的发送及回应日志。日志文件会非常大，且在一定程度上影响到程序的效率。建议在调试阶段使用。\u003c/p\u003e\u003cp\u003eNOTE：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印普通日志。该日志级别会打印出文件计费进程读取每个detail文件的开始时间和读取完成时间。正常情况下建议使用该日志级别。\u003c/p\u003e\u003cp\u003eWARN：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印告警日志。\u003c/p\u003e\u003cp\u003eERROR：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印错误日志。\u003c/p\u003e\u003cp\u003e注2：Record配置文件为radius和文件计费共同使用。Radius每新写一个detail文件，将该detail文件名写入Record文件；文件计费程序启动时读取Record文件，获得上次读的detail文件名，及上次读到的位置。每处理一行detail记录，将文件偏移量移到该记录下一条开始处。详见文件计费详细设计文档。\u003c/p\u003e\u003cp\u003e2.1.8.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费日志说明\u003c/p\u003e\u003cp\u003e目录：\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive/log\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003efile.log：记录文件计费启动情况，运行情况。\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:18 [NOTE ] Creating ThreadPool ..............\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Current Create 6 Thread,0 Failure\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Now Read Data File [/data1/lcims/lcims70/radius/radacct/detail.20111212_11]!\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 其中：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eCreating ThreadPool表示正在建立线程\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eCurrent Create 6 Thread,0 Failure 表示6个线程全部建立成功\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eNow Read Data File 表示正在处理的detail文件名\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eFileRating.log：文件计费启停日志。\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:15 Stop FileRating(pid=9055)\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:26 FileRating(pid=18373) started.\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的start.sh即可启动相应的文件计费进程；执行bin目录下的stop.sh可停掉文件计费进程。\u003c/p\u003e\u003cp\u003e2.1.8.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程检查\u003c/p\u003e\u003cp\u003e以FileOnline为例，运行start.sh后，若启动成功，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline(pid=24504) started.\u003c/p\u003e\u003cp\u003e若启动失败，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline failed to start, check log for details!\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e启动后，检查file.log日志，若启动成功，日志显示“Current Create 6 Thread,0 Failure”，若启动失败，日志显示“Create ThreadPool Failure!”。失败原因比较复杂多变，建议联系开发人员。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e模拟发送计费包，检查文件计费进程对计费包进行处理。若后台在线或计费程序收到相应的计费包，启动成功。\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003c/p\u003e\u003cp\u003e2.1.9.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费crontab配置\u003c/p\u003e\u003cp\u003e#FileOnline监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileOnline 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileRating监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileRating 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileAlive监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileAlive 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e2.1.9.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费监控脚本说明\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_fileacct.sh\u003c/p\u003e\u003cp\u003e参数：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程名\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e此脚本可用来监控文件计费进程的运行情况。运行情况分为两类：\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查文件计费进程是否存在，若不存在，尝试重启进程并告警；\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e每30分钟检查文件计费进程的处理效率，若出现大量拥堵情况则告警。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003estatus.sh\u003c/p\u003e\u003cp\u003e位置：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ebin\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看文件计费进程的工作状态。\u003c/p\u003e\u003cp\u003e示例：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e$ status.sh\u003c/p\u003e\u003cp\u003eVersion:1\u003c/p\u003e\u003cp\u003eCurrent have [1/4] Record\u003c/p\u003e\u003cp\u003eFirst Block 28\u003c/p\u003e\u003cp\u003eCurrent Block 580\u003c/p\u003e\u003cp\u003eprocess file \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :detail.20111108_10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前处理的detail文件\u003c/p\u003e\u003cp\u003efile size(bytes) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#此detail文件的大小\u003c/p\u003e\u003cp\u003eprocess location(bytes)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#进程已处理到的地方\u003c/p\u003e\u003cp\u003eremain packets \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#剩下未处理的包数\u003c/p\u003e\u003cp\u003eprocess time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :20111108105240\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e#进程处理到的包的开始时间或结束时间\u003c/p\u003e\u003cp\u003enow time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;:20120216091033\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前时间\u003c/p\u003e\u003cp\u003edelay(seconds) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :8633873\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e#延时时长\u003c/p\u003e\u003cp\u003e说明：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eprocess time：当前处理的为开始包，则此时间为开始包的开始时间；当前处理的为结束包，则此事件为结束包的结束时间。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003edelay：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enow time和process time的时间间隔，正常生产环境中，此值一般不会超过1分钟。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e2.1.9.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费短信告警及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程停止\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01`:FileRating,restart!”\u003c/p\u003e\u003cp\u003e告警原因：文件计费进程停止，可能的原因有：程序coredump\u003c/p\u003e\u003cp\u003e处理方法：若同样告警短信短时间内只有一条，可不用处理。后期联系开发人员检查告警发生原因。若同样告警短信短时间内不停出现，检查文件计费后台对应的计费程序是否运行正常。若对应的计费程序运行不正常，尝试重启计费程序，再重启文件计费程序。若仍未能启动成功，立即联系开发人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e大量拥堵\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01 FileRating delay 100 seconds (1000 packets).”\u003c/p\u003e\u003cp\u003e告警原因：后台计费程序处理缓慢。该情况通常在60系统发生，70系统在入库程序做了改进，此种告警一般不会发生。\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003ebilling1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.11\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003ebilling2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.12\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space: pre;\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e","content_source_url":"https://www.baidu.com/","cover_file_id":705,"content_url":null,"news_id":"1461550688","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxFSkA7yfSHunR0hZhaJbbpo","wx_official_account_id":1,"created_at":"2016-04-27T16:00:21.000+08:00","updated_at":"2016-04-27T16:00:21.000+08:00"},{"id":171,"title":"test","author":"mkm","digest":"test test","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"111","content_source_url":"http://baidu.com","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=401982286\u0026idx=1\u0026sn=e19f9fa4af8c873c348c1378387a4ea1#rd","news_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","index":0,"media_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-22T15:32:22.000+08:00"},{"id":208,"title":"图文消息测试1122-33-44","author":"Test","digest":"此处是图文消息的正文","thumb_media_id":"qotJ088R2YkTUAS5SPBMxAP5hMwrriSblwVBMlx0ZYk","show_cover_pic":0,"content":"\u003cp\u003e此处是图文消息的正文\u003cbr  /\u003e\u003c/p\u003e\u003cp\u003e\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"http://mmbiz.qpic.cn/mmbiz/dceprvV3vaLMGEy3ticJLn8mRaOwDicgCXxZ69Quw9orNYUsSB0w7YHSlVU9jIXWRmYs1cC2dKefQAfuUu5GCqzw/0?wx_fmt=jpeg\" data-ratio=\"0.6348920863309353\" data-w=\"\"  /\u003e\u003cbr  /\u003e\u003c/p\u003e","content_source_url":"http://www.sohu.com","cover_file_id":717,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198290\u0026idx=1\u0026sn=c9ae1956654812f3273b2a0deec2deba#rd","news_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","wx_official_account_id":1,"created_at":"2016-04-22T15:04:24.000+08:00","updated_at":"2016-04-22T16:54:53.000+08:00"},{"id":170,"title":"logrotate","author":"test","digest":"测试","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cpre accuse=\"aContent\" class=\"best-text mb-10\" style=\"\"\u003e你的配置虽然简单还是正确的\u003cbr  /\u003elogrotate 是帮助 rotate 日志文\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"https://mmbiz.qlogo.cn/mmbiz/dceprvV3vaLUZTzZuvWExkdyq2VJ3X81JbLUicUQ223UGib0sCJuAuXZCqS0iboLHxJXBYCVhZyXW4AmeG0NQfCdA/0?wx_fmt=jpeg\" data-ratio=\"1\" data-w=\"200\"  /\u003e\u003cbr  /\u003e\u003c/pre\u003e","content_source_url":"http://zhidao.baidu.com/link?url=FrOVCJhnq3k_EwbudhsAWOYGou0bAF_eAYbrf1moqgxdfoG0e4w37DvPC-hqfBAGeLnkNTLKuNEJjqp361OnAq","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198201\u0026idx=1\u0026sn=80f0362b032f9c2175816d93b3a17ad2#rd","news_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-21T14:51:23.000+08:00"}]
2016-04-28 14:47:13 INFO WxMenusController index action begin...
2016-04-28 14:47:14 INFO [{"id":242,"title":"Test3633","author":"liug","digest":"联创亚信科技(南京)有限公司","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cp\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e（V1.0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e密级：机密\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e联创亚信科技(南京)有限公司\u003c/p\u003e\u003cp\u003e2012年3月\u003c/p\u003e\u003cp\u003e文 档 信 息\u003c/p\u003e\u003cp\u003e文 档 名 称\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e归 档 部 门\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文 档 编 号:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eAILK-NBS-DATA-STD-003\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003c/p\u003e\u003cp\u003e文 档 变 更 记 录\u003c/p\u003e\u003cp\u003e版 本 编 号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版 本 日 期\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e作 者\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e说 明\u003c/p\u003e\u003cp\u003eV1.0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2012-3-23\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e胡元皓、沙先伟、李开衡、翟高星、薛建江\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e初稿\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e审 核\u003c/p\u003e\u003cp\u003e审核组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e审核代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e批 准\u003c/p\u003e\u003cp\u003e批准组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e批准代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目 录\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e6\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e15\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e16\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e19\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e20\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e23\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e26\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e30\u003c/p\u003e\u003cp\u003e2.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e40\u003c/p\u003e\u003cp\u003e2.2.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e46\u003c/p\u003e\u003cp\u003e2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e内存数据库\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e配置文件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e48\u003c/p\u003e\u003cp\u003e2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信告警\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e49\u003c/p\u003e\u003cp\u003e2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e附件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e2.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台程序相关总表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理和自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e60\u003c/p\u003e\u003cp\u003e3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e65\u003c/p\u003e\u003cp\u003e4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e76\u003c/p\u003e\u003cp\u003e5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信开通\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e130\u003c/p\u003e\u003cp\u003e5.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e150\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中${HOME}非特殊说明下，均指lcims用户的主目录。\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中非特殊说明下，均是指以lcims用户登录进行维护。\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003eRadius1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003eRadius2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003c/p\u003e\u003cp\u003e2.1.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/bin：存放radius可执行程序，启停脚本，监控脚本，模拟发包脚本\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/config：存放radius相关配置文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/log：存放radius产生的日志文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/radacct：存放radius产生的原始话单文件\u003c/p\u003e\u003cp\u003e2.1.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius进程运行说明\u003c/p\u003e\u003cp\u003e一套完整的radius程序主要由rad_collect、roam_collect、RadiusServer三组进程组成，它们分工协作，共同完成radius包的采集，解析，处理，转发，回包等工作。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e${HOME}/lcims70/radius/bin\u003c/p\u003e\u003cp\u003eUDP包采集与写消息队列执行程序：\u003c/p\u003e\u003cp\u003erad_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e指定端口UDP包采集与预处理执行程序\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e采集的端口号根据配置文件（radmsg.cfg）的内容指定\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e如：rad_collect 1为采集radmsg.cfg中端口组号为1\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e的端口\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e注：关于radmsg.cfg的配置具体看下面的说明。\u003c/p\u003e\u003cp\u003eroam_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e所有radius进程的漫游端口上的UDP包采集与预处理执行程序。\u003c/p\u003e\u003cp\u003erad_killmsg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e清除消息队列执行程序\u003c/p\u003e\u003cp\u003eRADIUS认证与计费执行程序：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003eRadiusServer\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS主执行程序\u003c/p\u003e\u003cp\u003eRadiusVPDN\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eVPDN代维系统主执行程序\u003c/p\u003e\u003cp\u003estartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动RADIUS批执行程序\u003c/p\u003e\u003cp\u003estopradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e停止RADIUS批执行程序\u003c/p\u003e\u003cp\u003erestartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e重启RADIUS批执行程序\u003c/p\u003e\u003cp\u003eradsend\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS测试发包程序\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eRADIUS自监控执行程序：\u003c/p\u003e\u003cp\u003emsgcount\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e： 消息队列监控程序\u003c/p\u003e\u003cp\u003elcims_alarm \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e： RADIUS告警程序\u003c/p\u003e\u003cp\u003e2.1.3.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer的参数说明\u003c/p\u003e\u003cp\u003e-1 ～ -9 表示从哪个消息读取数据包，1～9对应radmsg.cfg中的消息队列号\u003c/p\u003e\u003cp\u003e-b表示关闭logfile日志文件\u003c/p\u003e\u003cp\u003e-x表示打开x_debug.log日志文件\u003c/p\u003e\u003cp\u003e-j表示此server为计费server\u003c/p\u003e\u003cp\u003e-U表示此server为认证直通\u003c/p\u003e\u003cp\u003e-V表示此server为计费直通。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius日志说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/log\u003c/p\u003e\u003cp\u003einfo_auth*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e认证RADIUS启停log，每个认证RadiusServer产生一个\u003c/p\u003e\u003cp\u003einfo_acct*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e计费RADIUS启停log，每个计费RadiusServer产生一个\u003c/p\u003e\u003cp\u003eauth1645.msg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e消息队列log\u003c/p\u003e\u003cp\u003eerror_info\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eRADIUS SERVER重起信息log\u003c/p\u003e\u003cp\u003eradius$date_[1-5]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e认证RADIUS运行日志\u003c/p\u003e\u003cp\u003eradius$date_[6-8]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e计费RADIUS运行日志\u003c/p\u003e\u003cp\u003eauthok.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证成功的用户信息\u003c/p\u003e\u003cp\u003eauthfail.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证失败的用户信息\u003c/p\u003e\u003cp\u003eerrorpacket.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eRADIUS SERVER的每天被丢弃的错包信息\u003c/p\u003e\u003cp\u003e2.1.3.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius的detail文件说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/radacct\u003c/p\u003e\u003cp\u003eacct.（date）(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e文本方式的用户计费信息文件\u003c/p\u003e\u003cp\u003eerracct.(date)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e异常情况下未计费的用户detail文件\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e二进制方式用户计费信息文件\u003c/p\u003e\u003cp\u003e处理说明：\u003c/p\u003e\u003cp\u003eerracct.(date)(pid)文件计费子系统会回收的。\u003c/p\u003e\u003cp\u003eacct.(date)(pid)文件是用户上网情况的原始记录，可用户查询也可用于重计费。\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 文件计费进程读该文件。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/config\u003c/p\u003e\u003cp\u003e2.1.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003esysconfig\u003c/p\u003e\u003cp\u003e文件名：sysconfig\u003c/p\u003e\u003cp\u003e作用：Radius系统配置文件\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e#数据库的连接出现问题时，是否直接让帐号用户认证通过\u003c/p\u003e\u003cp\u003edirectpass = no\u003c/p\u003e\u003cp\u003e#省内NAS SECRET\u003c/p\u003e\u003cp\u003elocalsecret = xxxxxx\u003c/p\u003e\u003cp\u003e#省内域名\u003c/p\u003e\u003cp\u003elocalrealm = js.cn\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e#RadiusServer的服务类型是宽带还是窄带等\u003c/p\u003e\u003cp\u003e#类型有：\u003c/p\u003e\u003cp\u003e#narrowband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e窄带\u003c/p\u003e\u003cp\u003e#broadband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e宽带\u003c/p\u003e\u003cp\u003e#ALL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e宽窄带合一\u003c/p\u003e\u003cp\u003eService = ALL\u003c/p\u003e\u003cp\u003e#默认域名（即没有注册的域名）允许的被叫\u003c/p\u003e\u003cp\u003eDefault_Called = 163,17999,179,16300,16306,16388,169,1183300,9163\u003c/p\u003e\u003cp\u003e#用户默认的最大上网时长\u003c/p\u003e\u003cp\u003eTimeout = 8640000\u003c/p\u003e\u003cp\u003e#用户默认的最大上网流量（K为单位）\u003c/p\u003e\u003cp\u003eFlowout = 1073741824\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e#交换机地址\u003c/p\u003e\u003cp\u003e\u0026nbsp;alteon1 = 192.168.53.1\u003c/p\u003e\u003cp\u003ealteon2 = 192.168.53.2\u003c/p\u003e\u003cp\u003ealteon3 = 192.168.53.3\u003c/p\u003e\u003cp\u003e#是否文件计费\u003c/p\u003e\u003cp\u003eFileAcct = yes\u003c/p\u003e\u003cp\u003e#文件计费记录文件\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/OnlineConfig.ini\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/RatingConfig.ini\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile\u003c/p\u003e\u003cp\u003e文件名：authfile\u003c/p\u003e\u003cp\u003e作用：域名配置文件。配置域名的认证类型和转发地址，其中认证类型有：\u003c/p\u003e\u003cp\u003eDATABASE:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e表示本地认证\u003c/p\u003e\u003cp\u003eRADIUS\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e表示漫游认证\u003c/p\u003e\u003cp\u003eDeny\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; 表示拒绝认证\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e域名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e处理AATV\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e地址\u003c/p\u003e\u003cp\u003eNULL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;DEFAULT \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;peap.com \u0026nbsp; \u0026nbsp; \u0026nbsp; RADIUS \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; 221.130.120.179\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e注：现在域名信息一般通过业务系统存放在数据库中BD_AUTHTYPE表中，此文件中域名配置优先级高于BD_AUTHTYPE。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的域名配置文件。该文件格式跟authfile.abn一样，包括authfile文件和数据库中的所有的域名信息，每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients\u003c/p\u003e\u003cp\u003e作用：客户端(NAS,PROXY RADIUS)配置文件。通常用来配置漫游转发设备的地址信息。现在本地客户端信息通过业务系统存放在数据库中BD_NAS表中，而漫游的地址必须存放在此文件中。如果有新的客户端要加入，请在加入后重新启动radius进程。\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp; 源地址\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e密钥\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e类型\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e版本\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; 127.0.0.1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003exxxxx \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003etype = nas \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003ev1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的客户端(NAS,PROXY RADIUS)配置文件。该文件格式跟clients一样，包括clients文件和数据库中所有的设备地址信息。此文件每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eradmsg.cfg\u003c/p\u003e\u003cp\u003e作用：消息队列配置文件。rad_collect和RadiusServer启动时，从该文件读取消息队列配置信息。\u003c/p\u003e\u003cp\u003e消息队列号：对应于每个RadiusServer启动参数-M后的数字。起了多少个RadiusServer，就有多少个消息队列号。RadiusServer根据消息队列号去对应的消息队列中读取报文信息进行处理。\u003c/p\u003e\u003cp\u003e采集端口号：程序监听的udp端口号。\u003c/p\u003e\u003cp\u003e端口组号：对应于rad_collect的启动参数，程序启动时监听在该端口组号对应的采集端口号上。有几个不同的端口组号，就对应几个带不同参数的rad_collect进程。\u003c/p\u003e\u003cp\u003e一个rad_collect进程，监听在一个udp端口上，可以将采集到的数据包根据同一个端口组号对应的消息队列号，写入到不同的消息队列中\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e消息队列文件名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e消息队列号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e采集端口号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e端口组号\u003c/p\u003e\u003cp\u003e../config/message1 \u0026nbsp; \u0026nbsp; \u0026nbsp; 1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1812 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e1\u003c/p\u003e\u003cp\u003e../config/message2 \u0026nbsp; \u0026nbsp; \u0026nbsp; 2 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1813 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e2\u003c/p\u003e\u003cp\u003e../config/message11 \u0026nbsp; \u0026nbsp; \u0026nbsp;11 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1645 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e3\u003c/p\u003e\u003cp\u003e../config/message12 \u0026nbsp; \u0026nbsp; \u0026nbsp;12 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1646 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enasfile\u003c/p\u003e\u003cp\u003e作用：本地nas信息配置文件。该文件包含所有本地nas资料，直通时通过此文件读取本地nas信息。此文件每天维护\u003c/p\u003e\u003cp\u003eareano：属地号\u003c/p\u003e\u003cp\u003edevice：设备型号\u003c/p\u003e\u003cp\u003eaccesstype：接入方式，1表示窄带接入，2表示宽带接入\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e#ip\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eareano\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edevice\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eaccesstype\u003c/p\u003e\u003cp\u003e192.168.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e0001\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eLinkage\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e 2\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edictionary\u003c/p\u003e\u003cp\u003e作用：RADIUS SERVER数据字典。记录目前可以处理的RADIUS属性\u003c/p\u003e\u003cp\u003e标准属性的写法\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; Type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eATTRIBUTE \u0026nbsp; \u0026nbsp; \u0026nbsp; NAS-Port \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;5 \u0026nbsp; \u0026nbsp; \u0026nbsp; integer (0, 0)\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e这表示5号标准属性，属性名称为NAS-Port，数据类型为Int，括号中的内容表示在认证成功和认证失败的报文中是否要包括此属性，‘1’表示最多包括一个，‘0’表示不包括，‘*’表示可包含多个，不写默认为（0,0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e厂商的私有属性写法（26号属性）\u003c/p\u003e\u003cp\u003e厂商名.attr\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e \u0026nbsp;type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003eLinkage.attr \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eLcims-User-Type \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;202 \u0026nbsp; \u0026nbsp; integer\u003c/p\u003e\u003cp\u003e此处的厂商名一定要在vendors中定义，见1.4.9\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003evendors\u003c/p\u003e\u003cp\u003e作用：记录目前可处理的厂商属性标识。在业务系统中各类接入设备的供应商都要在此文件中定义\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003eCisco.attr Cisco.value 9 Cisco\u003c/p\u003e\u003cp\u003e这表示在dictionary文件中用Cisco.attr标识的属性和以Cisco.value标识的属性值为Cisco的私有属性（26号属性所带的），9表示为Cisco的厂商代码（可见rfc1700）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eusers\u003c/p\u003e\u003cp\u003e作用：用户基本上网授权属性配置文件。第一栏是用户名，同一行对应的是认证请求条件，通常为密码。下面对应的是在满足认证请求条件的前提下，RadiusServer需要授权给设备的属性列表。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e如：窄带用户网内有权返回\u003c/p\u003e\u003cp\u003eldimstest \u0026nbsp; \u0026nbsp; \u0026nbsp; Password = \u0026quot;test\u0026quot;\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Service-Type = Framed,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Framed-Protocol = PPP,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Session-Timeout = 10\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003c/p\u003e\u003cp\u003e2.1.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的startradius即可启动相应的radius server；执行bin目录下的stopradius可停掉radius server；执行restartradius可重起radius server。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e直通方法：\u003c/p\u003e\u003cp\u003e1. 核对直通所需的各配置文件是否正常。包括：authfile.abn，clients.abn，nasfile；\u003c/p\u003e\u003cp\u003e2. 如果配置文件非正常，或数据与最新内容有出入，则修改配置或重新生成最新配置文件；\u003c/p\u003e\u003cp\u003e3. 修改配置文件sysconfig，directpass = yes 并保存；\u003c/p\u003e\u003cp\u003e4. 重启radius进程。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e检查radius$date_[n]日志，有全部的本地nas信息和域名信息注册资料，并有“Init MSGQ Succeed!”字样，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列检查\u003c/p\u003e\u003cp\u003e在radius前置机任何路径输入ipcs –qo命令，查看消息队列数是否与RadiusServer进程数相等，是否有堵塞情况。若消息队列数与RadiusServer进程数相等，且无堵塞情况，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e使用测试账号模拟发认证包，检查authok和authfail日志，如果有对应记录，且认证结果符合预期，表明该检查结果正确。模拟发计费包后，检查acct文件，如果有对应记录，表明该检查结果正确；检查detail文件，如果文件存在且更新时间为发包时间，则该检查结果正确。\u003c/p\u003e\u003cp\u003e三步检查都成功，表明radius进程启动成功。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003c/p\u003e\u003cp\u003e2.1.6.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius crontab配置\u003c/p\u003e\u003cp\u003ecrontab设置：\u003c/p\u003e\u003cp\u003e#radius进程、消息队列监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/radius/monitor/monitor_radius.sh \u0026nbsp;\u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/monitor_radius.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时重启radius进程\u003c/p\u003e\u003cp\u003e40 06 * * * ${HOME}/lcims70/radius/bin/restartradius \u0026gt; ${HOME}/lcims70/radius/log/restart.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份detail文件\u003c/p\u003e\u003cp\u003e34 1 * * * ${HOME}/lcims70/radius/monitor/bakdetail.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakdetail.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份日志文件\u003c/p\u003e\u003cp\u003e10 0 * * * ${HOME}/lcims70/radius/monitor/bakradiuslog.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakradiuslog.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时获取直通所需nas和域名信息\u003c/p\u003e\u003cp\u003e22 5 * * * ${HOME}/lcims70/radius/config/getnas.sh \u0026gt; ${HOME}/lcims70/radius/config/nas.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius监控脚本monitor_radius.sh详解\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh流程图\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh阀值说明\u003c/p\u003e\u003cp\u003eMaxBlock：消息队列堵塞个数阀值，默认值30\u003c/p\u003e\u003cp\u003eMsgCheckWait：消息队列下次检查等待时间，默认值3秒\u003c/p\u003e\u003cp\u003eRestartCheckTimes：消息队列连续检查次数阀值，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassCheckTimes：普通重启次数阀值，重启次数超过这个阀值就直通，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassHoldTimes：直通时间阀值，超过这个时间就恢复非直通，默认值5分钟\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius告警并自动重启的条件\u003c/p\u003e\u003cp\u003ea)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞个数超过配置阀值；\u003c/p\u003e\u003cp\u003eb)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包不通或认证失败。\u003c/p\u003e\u003cp\u003e4、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动直通的条件\u003c/p\u003e\u003cp\u003eRadius第一次重启到radius恢复正常（消息队列不堵）之前，重启次数超过配置阀值。\u003c/p\u003e\u003cp\u003e5、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动的从直通中恢复的条件\u003c/p\u003e\u003cp\u003e直通时间大于配置阀值。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius短信告警分析及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞\u003c/p\u003e\u003cp\u003e告警内容举例：”radius01:radius restart1.auth msg block 231”\u003c/p\u003e\u003cp\u003e告警原因：消息队列堵塞，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大量认证包，造成radius进程处理不过来。此种情况一般不会发生；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理缓慢，造成此结果通常有两个原因：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大批量用户资料更新，造成同步程序占用过多磁盘io，导致认证程序取用户资料缓慢；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据库出现问题，造成在线程序取用户在线资料失败或缓慢\u003c/p\u003e\u003cp\u003ec）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e某个RadiusServer进程宕了\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警信息短时间内只收到一条，radius进程已自行重启，无需登录主机查看；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警短信短时间内连续出现，需做以下步骤的检查：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录发生告警的radius主机，检查是否每个RadiusServer进程都在，若有进程消失，说明是radius的问题。重启radius后若同样的错误还是会发生，改直通并联系开发人员查错；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若所有消息队列都在堵塞，登录发生告警的radius主机对应的billing主机，检查认证日志，查看一个认证包的处理时间，若处理时间明显长于平时（毫秒级），继续检查是哪一步占用时间比较长。根据上述分析，通常占用时间长的会是取用户资料或查在线。\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是认证程序取用户资料时间过长，修改同步配置，重启同步配置。修改方法见下文\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是查询在线时间过长，尝试重启在线和认证程序。若还是没效果，启动nodb认证模式，登陆数据库主机检查数据库CPU及磁盘使用情况，确定数据库异常原因，联系相关人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包无回应\u003c/p\u003e\u003cp\u003e告警内容举例：“radius restart 1.auth abnormal”\u003c/p\u003e\u003cp\u003e告警原因：radius监控模拟发包无回应，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer进程宕了；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理时间超过模拟发包软件的超时时间，而造成这一结果的原因与消息队列堵塞原因类似。\u003c/p\u003e\u003cp\u003e处理方法：同消息队列堵塞\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e磁盘空间告警\u003c/p\u003e\u003cp\u003e告警内容举例：“raidust:direcroty:/radius--used:80%s”\u003c/p\u003e\u003cp\u003e告警原因：日志或备份文件过大，导致磁盘剩余空间不足\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查是否有过大文件，如软件安装程序，抓包文件等，若有，则视情况进行清理。查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的radius前缀日志文件，检查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的acct和detail文件。\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查定时清理磁盘脚本，是否没有定时执行。若定时执行，重新评估该脚本是否需要根据实际情况加以修改。\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e从测试机往每台radius前置机的radius/bin目录ftp上传新的RadiusServer程序，上传时更名为RadiusServer.new\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登陆radius前置机，进入radius/bin目录，执行以下操作：\u003c/p\u003e\u003cp\u003emv RadiusServer RadiusServer.${date}\u003c/p\u003e\u003cp\u003emv RadiusServer.new RadiusServer\u003c/p\u003e\u003cp\u003echmod +x RadiusServer\u003c/p\u003e\u003cp\u003erestartradius\u003c/p\u003e\u003cp\u003e其中 ${date} 为更新时间\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e更新后检查\u003c/p\u003e\u003cp\u003e1）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看日志，检查程序启动情况；\u003c/p\u003e\u003cp\u003e2）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包，分别检查正常业务和新版本更新业务。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003c/p\u003e\u003cp\u003e2.1.8.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费系统概述\u003c/p\u003e\u003cp\u003e随着用户数量的不断增加，计费包的数量也不断的加大，原来的计费方式为直接连接计费Server进行计费，一但数据库出现问题或者包数过多的话就会造成计费包丢失，而且由于radius要等待计费Server计费完毕才能回应信息给接入设备，一但超时，接入设备会再次重发计费包，造成计费系统更大的处理负担。\u003c/p\u003e\u003cp\u003e现在准备增加文件缓冲计费的模块，Radius接收到计费包后写入计费文件，然后就给接入设备回应，而文件缓冲计费程序从计费文件中读出计费信息传给计费server进行计费，这样用文件作为缓冲池可以在计费包多的时候先把计费包记录下来，再去计费，不会造成丢包。\u003c/p\u003e\u003cp\u003e由于读取计费文件是实时的计费不会有太长时间的等待，基本可以在几秒内将用户的清单入库。\u003c/p\u003e\u003cp\u003e2.1.8.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate：FileRating程序主目录\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive：FileAlive程序主目录（目前只有江苏电信版本有）\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online：FileOnline程序主目录\u003c/p\u003e\u003cp\u003e其中：\u003c/p\u003e\u003cp\u003ebin：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放可执行程序，启停脚本，监控脚本\u003c/p\u003e\u003cp\u003econfig：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放配置文件\u003c/p\u003e\u003cp\u003elog：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放日志文件\u003c/p\u003e\u003cp\u003e2.1.8.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费进程说明\u003c/p\u003e\u003cp\u003e文件计费进程，由FileOnline，FileRating，FileAlive三个进程组成，分别将radius收到的计费包发送给不同的后台程序进行处理。其中FileOnline和FileRating必须起，FileAlive根据实际情况加以启停。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eFileOnline：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_ONLINE发送计费包，用于生成在线信息；\u003c/p\u003e\u003cp\u003eFileRating：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_RATING发送计费包，用于生成清单信息；\u003c/p\u003e\u003cp\u003eFileAlive：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读取radius产生的计费原始话单，将话单中的起始包，中间包和结束包发送给AB_ALIVE；\u003c/p\u003e\u003cp\u003eFileStatus：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e用于监控文件计费进程处理速度。\u003c/p\u003e\u003cp\u003e2.1.8.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费配置文件配置\u003c/p\u003e\u003cp\u003e配置文件：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/rate/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/alive/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/online/config/system.cfg\u003c/p\u003e\u003cp\u003e作用：文件计费配置文件，配置程序相关路径、日志级别、线程数等。\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e[LOGFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件配置\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/fileacct/rate/log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME =file.log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\u003c/span\u003e#日志文件名\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;LEVEL = NOTE\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\t\u003c/span\u003e#日志级别 （注1）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[RECORDFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件配置 （注2）\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/config\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME = RatingConfig.ini\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#Record配置文件名\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[DATAFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Radius的detail文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/radacct\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[THREADNUM]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e#线程数\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;NUMBER = 4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e注1：日志级别分为ALL、DEBUG、NOTE、WARN、ERROR，一般情况下使用NOTE级别\u003c/p\u003e\u003cp\u003eALL：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印全部日志。\u003c/p\u003e\u003cp\u003eDEBUG：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印调试日志。该日志级别会打印出detail文件中每一个包的发送及回应日志。日志文件会非常大，且在一定程度上影响到程序的效率。建议在调试阶段使用。\u003c/p\u003e\u003cp\u003eNOTE：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印普通日志。该日志级别会打印出文件计费进程读取每个detail文件的开始时间和读取完成时间。正常情况下建议使用该日志级别。\u003c/p\u003e\u003cp\u003eWARN：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印告警日志。\u003c/p\u003e\u003cp\u003eERROR：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印错误日志。\u003c/p\u003e\u003cp\u003e注2：Record配置文件为radius和文件计费共同使用。Radius每新写一个detail文件，将该detail文件名写入Record文件；文件计费程序启动时读取Record文件，获得上次读的detail文件名，及上次读到的位置。每处理一行detail记录，将文件偏移量移到该记录下一条开始处。详见文件计费详细设计文档。\u003c/p\u003e\u003cp\u003e2.1.8.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费日志说明\u003c/p\u003e\u003cp\u003e目录：\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive/log\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003efile.log：记录文件计费启动情况，运行情况。\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:18 [NOTE ] Creating ThreadPool ..............\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Current Create 6 Thread,0 Failure\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Now Read Data File [/data1/lcims/lcims70/radius/radacct/detail.20111212_11]!\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 其中：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eCreating ThreadPool表示正在建立线程\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eCurrent Create 6 Thread,0 Failure 表示6个线程全部建立成功\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eNow Read Data File 表示正在处理的detail文件名\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eFileRating.log：文件计费启停日志。\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:15 Stop FileRating(pid=9055)\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:26 FileRating(pid=18373) started.\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的start.sh即可启动相应的文件计费进程；执行bin目录下的stop.sh可停掉文件计费进程。\u003c/p\u003e\u003cp\u003e2.1.8.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程检查\u003c/p\u003e\u003cp\u003e以FileOnline为例，运行start.sh后，若启动成功，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline(pid=24504) started.\u003c/p\u003e\u003cp\u003e若启动失败，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline failed to start, check log for details!\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e启动后，检查file.log日志，若启动成功，日志显示“Current Create 6 Thread,0 Failure”，若启动失败，日志显示“Create ThreadPool Failure!”。失败原因比较复杂多变，建议联系开发人员。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e模拟发送计费包，检查文件计费进程对计费包进行处理。若后台在线或计费程序收到相应的计费包，启动成功。\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003c/p\u003e\u003cp\u003e2.1.9.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费crontab配置\u003c/p\u003e\u003cp\u003e#FileOnline监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileOnline 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileRating监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileRating 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileAlive监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileAlive 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e2.1.9.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费监控脚本说明\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_fileacct.sh\u003c/p\u003e\u003cp\u003e参数：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程名\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e此脚本可用来监控文件计费进程的运行情况。运行情况分为两类：\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查文件计费进程是否存在，若不存在，尝试重启进程并告警；\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e每30分钟检查文件计费进程的处理效率，若出现大量拥堵情况则告警。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003estatus.sh\u003c/p\u003e\u003cp\u003e位置：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ebin\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看文件计费进程的工作状态。\u003c/p\u003e\u003cp\u003e示例：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e$ status.sh\u003c/p\u003e\u003cp\u003eVersion:1\u003c/p\u003e\u003cp\u003eCurrent have [1/4] Record\u003c/p\u003e\u003cp\u003eFirst Block 28\u003c/p\u003e\u003cp\u003eCurrent Block 580\u003c/p\u003e\u003cp\u003eprocess file \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :detail.20111108_10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前处理的detail文件\u003c/p\u003e\u003cp\u003efile size(bytes) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#此detail文件的大小\u003c/p\u003e\u003cp\u003eprocess location(bytes)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#进程已处理到的地方\u003c/p\u003e\u003cp\u003eremain packets \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#剩下未处理的包数\u003c/p\u003e\u003cp\u003eprocess time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :20111108105240\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e#进程处理到的包的开始时间或结束时间\u003c/p\u003e\u003cp\u003enow time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;:20120216091033\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前时间\u003c/p\u003e\u003cp\u003edelay(seconds) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :8633873\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e#延时时长\u003c/p\u003e\u003cp\u003e说明：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eprocess time：当前处理的为开始包，则此时间为开始包的开始时间；当前处理的为结束包，则此事件为结束包的结束时间。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003edelay：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enow time和process time的时间间隔，正常生产环境中，此值一般不会超过1分钟。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e2.1.9.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费短信告警及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程停止\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01`:FileRating,restart!”\u003c/p\u003e\u003cp\u003e告警原因：文件计费进程停止，可能的原因有：程序coredump\u003c/p\u003e\u003cp\u003e处理方法：若同样告警短信短时间内只有一条，可不用处理。后期联系开发人员检查告警发生原因。若同样告警短信短时间内不停出现，检查文件计费后台对应的计费程序是否运行正常。若对应的计费程序运行不正常，尝试重启计费程序，再重启文件计费程序。若仍未能启动成功，立即联系开发人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e大量拥堵\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01 FileRating delay 100 seconds (1000 packets).”\u003c/p\u003e\u003cp\u003e告警原因：后台计费程序处理缓慢。该情况通常在60系统发生，70系统在入库程序做了改进，此种告警一般不会发生。\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003ebilling1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.11\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003ebilling2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.12\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space: pre;\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e","content_source_url":"https://www.baidu.com/","cover_file_id":705,"content_url":null,"news_id":"1461550688","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxFSkA7yfSHunR0hZhaJbbpo","wx_official_account_id":1,"created_at":"2016-04-27T16:00:21.000+08:00","updated_at":"2016-04-27T16:00:21.000+08:00"},{"id":171,"title":"test","author":"mkm","digest":"test test","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"111","content_source_url":"http://baidu.com","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=401982286\u0026idx=1\u0026sn=e19f9fa4af8c873c348c1378387a4ea1#rd","news_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","index":0,"media_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-22T15:32:22.000+08:00"},{"id":208,"title":"图文消息测试1122-33-44","author":"Test","digest":"此处是图文消息的正文","thumb_media_id":"qotJ088R2YkTUAS5SPBMxAP5hMwrriSblwVBMlx0ZYk","show_cover_pic":0,"content":"\u003cp\u003e此处是图文消息的正文\u003cbr  /\u003e\u003c/p\u003e\u003cp\u003e\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"http://mmbiz.qpic.cn/mmbiz/dceprvV3vaLMGEy3ticJLn8mRaOwDicgCXxZ69Quw9orNYUsSB0w7YHSlVU9jIXWRmYs1cC2dKefQAfuUu5GCqzw/0?wx_fmt=jpeg\" data-ratio=\"0.6348920863309353\" data-w=\"\"  /\u003e\u003cbr  /\u003e\u003c/p\u003e","content_source_url":"http://www.sohu.com","cover_file_id":717,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198290\u0026idx=1\u0026sn=c9ae1956654812f3273b2a0deec2deba#rd","news_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","wx_official_account_id":1,"created_at":"2016-04-22T15:04:24.000+08:00","updated_at":"2016-04-22T16:54:53.000+08:00"},{"id":170,"title":"logrotate","author":"test","digest":"测试","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cpre accuse=\"aContent\" class=\"best-text mb-10\" style=\"\"\u003e你的配置虽然简单还是正确的\u003cbr  /\u003elogrotate 是帮助 rotate 日志文\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"https://mmbiz.qlogo.cn/mmbiz/dceprvV3vaLUZTzZuvWExkdyq2VJ3X81JbLUicUQ223UGib0sCJuAuXZCqS0iboLHxJXBYCVhZyXW4AmeG0NQfCdA/0?wx_fmt=jpeg\" data-ratio=\"1\" data-w=\"200\"  /\u003e\u003cbr  /\u003e\u003c/pre\u003e","content_source_url":"http://zhidao.baidu.com/link?url=FrOVCJhnq3k_EwbudhsAWOYGou0bAF_eAYbrf1moqgxdfoG0e4w37DvPC-hqfBAGeLnkNTLKuNEJjqp361OnAq","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198201\u0026idx=1\u0026sn=80f0362b032f9c2175816d93b3a17ad2#rd","news_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-21T14:51:23.000+08:00"}]
2016-04-28 14:56:16 INFO WxMenusController index action begin...
2016-04-28 14:56:16 INFO [{"id":242,"title":"Test3633","author":"liug","digest":"联创亚信科技(南京)有限公司","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cp\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e（V1.0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e密级：机密\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e联创亚信科技(南京)有限公司\u003c/p\u003e\u003cp\u003e2012年3月\u003c/p\u003e\u003cp\u003e文 档 信 息\u003c/p\u003e\u003cp\u003e文 档 名 称\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e归 档 部 门\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文 档 编 号:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eAILK-NBS-DATA-STD-003\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003c/p\u003e\u003cp\u003e文 档 变 更 记 录\u003c/p\u003e\u003cp\u003e版 本 编 号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版 本 日 期\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e作 者\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e说 明\u003c/p\u003e\u003cp\u003eV1.0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2012-3-23\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e胡元皓、沙先伟、李开衡、翟高星、薛建江\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e初稿\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e审 核\u003c/p\u003e\u003cp\u003e审核组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e审核代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e批 准\u003c/p\u003e\u003cp\u003e批准组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e批准代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目 录\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e6\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e15\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e16\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e19\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e20\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e23\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e26\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e30\u003c/p\u003e\u003cp\u003e2.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e40\u003c/p\u003e\u003cp\u003e2.2.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e46\u003c/p\u003e\u003cp\u003e2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e内存数据库\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e配置文件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e48\u003c/p\u003e\u003cp\u003e2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信告警\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e49\u003c/p\u003e\u003cp\u003e2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e附件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e2.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台程序相关总表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理和自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e60\u003c/p\u003e\u003cp\u003e3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e65\u003c/p\u003e\u003cp\u003e4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e76\u003c/p\u003e\u003cp\u003e5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信开通\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e130\u003c/p\u003e\u003cp\u003e5.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e150\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中${HOME}非特殊说明下，均指lcims用户的主目录。\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中非特殊说明下，均是指以lcims用户登录进行维护。\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003eRadius1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003eRadius2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003c/p\u003e\u003cp\u003e2.1.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/bin：存放radius可执行程序，启停脚本，监控脚本，模拟发包脚本\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/config：存放radius相关配置文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/log：存放radius产生的日志文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/radacct：存放radius产生的原始话单文件\u003c/p\u003e\u003cp\u003e2.1.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius进程运行说明\u003c/p\u003e\u003cp\u003e一套完整的radius程序主要由rad_collect、roam_collect、RadiusServer三组进程组成，它们分工协作，共同完成radius包的采集，解析，处理，转发，回包等工作。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e${HOME}/lcims70/radius/bin\u003c/p\u003e\u003cp\u003eUDP包采集与写消息队列执行程序：\u003c/p\u003e\u003cp\u003erad_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e指定端口UDP包采集与预处理执行程序\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e采集的端口号根据配置文件（radmsg.cfg）的内容指定\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e如：rad_collect 1为采集radmsg.cfg中端口组号为1\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e的端口\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e注：关于radmsg.cfg的配置具体看下面的说明。\u003c/p\u003e\u003cp\u003eroam_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e所有radius进程的漫游端口上的UDP包采集与预处理执行程序。\u003c/p\u003e\u003cp\u003erad_killmsg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e清除消息队列执行程序\u003c/p\u003e\u003cp\u003eRADIUS认证与计费执行程序：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003eRadiusServer\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS主执行程序\u003c/p\u003e\u003cp\u003eRadiusVPDN\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eVPDN代维系统主执行程序\u003c/p\u003e\u003cp\u003estartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动RADIUS批执行程序\u003c/p\u003e\u003cp\u003estopradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e停止RADIUS批执行程序\u003c/p\u003e\u003cp\u003erestartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e重启RADIUS批执行程序\u003c/p\u003e\u003cp\u003eradsend\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS测试发包程序\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eRADIUS自监控执行程序：\u003c/p\u003e\u003cp\u003emsgcount\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e： 消息队列监控程序\u003c/p\u003e\u003cp\u003elcims_alarm \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e： RADIUS告警程序\u003c/p\u003e\u003cp\u003e2.1.3.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer的参数说明\u003c/p\u003e\u003cp\u003e-1 ～ -9 表示从哪个消息读取数据包，1～9对应radmsg.cfg中的消息队列号\u003c/p\u003e\u003cp\u003e-b表示关闭logfile日志文件\u003c/p\u003e\u003cp\u003e-x表示打开x_debug.log日志文件\u003c/p\u003e\u003cp\u003e-j表示此server为计费server\u003c/p\u003e\u003cp\u003e-U表示此server为认证直通\u003c/p\u003e\u003cp\u003e-V表示此server为计费直通。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius日志说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/log\u003c/p\u003e\u003cp\u003einfo_auth*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e认证RADIUS启停log，每个认证RadiusServer产生一个\u003c/p\u003e\u003cp\u003einfo_acct*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e计费RADIUS启停log，每个计费RadiusServer产生一个\u003c/p\u003e\u003cp\u003eauth1645.msg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e消息队列log\u003c/p\u003e\u003cp\u003eerror_info\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eRADIUS SERVER重起信息log\u003c/p\u003e\u003cp\u003eradius$date_[1-5]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e认证RADIUS运行日志\u003c/p\u003e\u003cp\u003eradius$date_[6-8]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e计费RADIUS运行日志\u003c/p\u003e\u003cp\u003eauthok.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证成功的用户信息\u003c/p\u003e\u003cp\u003eauthfail.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证失败的用户信息\u003c/p\u003e\u003cp\u003eerrorpacket.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eRADIUS SERVER的每天被丢弃的错包信息\u003c/p\u003e\u003cp\u003e2.1.3.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius的detail文件说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/radacct\u003c/p\u003e\u003cp\u003eacct.（date）(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e文本方式的用户计费信息文件\u003c/p\u003e\u003cp\u003eerracct.(date)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e异常情况下未计费的用户detail文件\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e二进制方式用户计费信息文件\u003c/p\u003e\u003cp\u003e处理说明：\u003c/p\u003e\u003cp\u003eerracct.(date)(pid)文件计费子系统会回收的。\u003c/p\u003e\u003cp\u003eacct.(date)(pid)文件是用户上网情况的原始记录，可用户查询也可用于重计费。\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 文件计费进程读该文件。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/config\u003c/p\u003e\u003cp\u003e2.1.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003esysconfig\u003c/p\u003e\u003cp\u003e文件名：sysconfig\u003c/p\u003e\u003cp\u003e作用：Radius系统配置文件\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e#数据库的连接出现问题时，是否直接让帐号用户认证通过\u003c/p\u003e\u003cp\u003edirectpass = no\u003c/p\u003e\u003cp\u003e#省内NAS SECRET\u003c/p\u003e\u003cp\u003elocalsecret = xxxxxx\u003c/p\u003e\u003cp\u003e#省内域名\u003c/p\u003e\u003cp\u003elocalrealm = js.cn\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e#RadiusServer的服务类型是宽带还是窄带等\u003c/p\u003e\u003cp\u003e#类型有：\u003c/p\u003e\u003cp\u003e#narrowband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e窄带\u003c/p\u003e\u003cp\u003e#broadband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e宽带\u003c/p\u003e\u003cp\u003e#ALL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e宽窄带合一\u003c/p\u003e\u003cp\u003eService = ALL\u003c/p\u003e\u003cp\u003e#默认域名（即没有注册的域名）允许的被叫\u003c/p\u003e\u003cp\u003eDefault_Called = 163,17999,179,16300,16306,16388,169,1183300,9163\u003c/p\u003e\u003cp\u003e#用户默认的最大上网时长\u003c/p\u003e\u003cp\u003eTimeout = 8640000\u003c/p\u003e\u003cp\u003e#用户默认的最大上网流量（K为单位）\u003c/p\u003e\u003cp\u003eFlowout = 1073741824\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e#交换机地址\u003c/p\u003e\u003cp\u003e\u0026nbsp;alteon1 = 192.168.53.1\u003c/p\u003e\u003cp\u003ealteon2 = 192.168.53.2\u003c/p\u003e\u003cp\u003ealteon3 = 192.168.53.3\u003c/p\u003e\u003cp\u003e#是否文件计费\u003c/p\u003e\u003cp\u003eFileAcct = yes\u003c/p\u003e\u003cp\u003e#文件计费记录文件\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/OnlineConfig.ini\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/RatingConfig.ini\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile\u003c/p\u003e\u003cp\u003e文件名：authfile\u003c/p\u003e\u003cp\u003e作用：域名配置文件。配置域名的认证类型和转发地址，其中认证类型有：\u003c/p\u003e\u003cp\u003eDATABASE:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e表示本地认证\u003c/p\u003e\u003cp\u003eRADIUS\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e表示漫游认证\u003c/p\u003e\u003cp\u003eDeny\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; 表示拒绝认证\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e域名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e处理AATV\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e地址\u003c/p\u003e\u003cp\u003eNULL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;DEFAULT \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;peap.com \u0026nbsp; \u0026nbsp; \u0026nbsp; RADIUS \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; 221.130.120.179\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e注：现在域名信息一般通过业务系统存放在数据库中BD_AUTHTYPE表中，此文件中域名配置优先级高于BD_AUTHTYPE。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的域名配置文件。该文件格式跟authfile.abn一样，包括authfile文件和数据库中的所有的域名信息，每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients\u003c/p\u003e\u003cp\u003e作用：客户端(NAS,PROXY RADIUS)配置文件。通常用来配置漫游转发设备的地址信息。现在本地客户端信息通过业务系统存放在数据库中BD_NAS表中，而漫游的地址必须存放在此文件中。如果有新的客户端要加入，请在加入后重新启动radius进程。\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp; 源地址\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e密钥\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e类型\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e版本\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; 127.0.0.1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003exxxxx \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003etype = nas \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003ev1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的客户端(NAS,PROXY RADIUS)配置文件。该文件格式跟clients一样，包括clients文件和数据库中所有的设备地址信息。此文件每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eradmsg.cfg\u003c/p\u003e\u003cp\u003e作用：消息队列配置文件。rad_collect和RadiusServer启动时，从该文件读取消息队列配置信息。\u003c/p\u003e\u003cp\u003e消息队列号：对应于每个RadiusServer启动参数-M后的数字。起了多少个RadiusServer，就有多少个消息队列号。RadiusServer根据消息队列号去对应的消息队列中读取报文信息进行处理。\u003c/p\u003e\u003cp\u003e采集端口号：程序监听的udp端口号。\u003c/p\u003e\u003cp\u003e端口组号：对应于rad_collect的启动参数，程序启动时监听在该端口组号对应的采集端口号上。有几个不同的端口组号，就对应几个带不同参数的rad_collect进程。\u003c/p\u003e\u003cp\u003e一个rad_collect进程，监听在一个udp端口上，可以将采集到的数据包根据同一个端口组号对应的消息队列号，写入到不同的消息队列中\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e消息队列文件名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e消息队列号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e采集端口号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e端口组号\u003c/p\u003e\u003cp\u003e../config/message1 \u0026nbsp; \u0026nbsp; \u0026nbsp; 1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1812 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e1\u003c/p\u003e\u003cp\u003e../config/message2 \u0026nbsp; \u0026nbsp; \u0026nbsp; 2 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1813 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e2\u003c/p\u003e\u003cp\u003e../config/message11 \u0026nbsp; \u0026nbsp; \u0026nbsp;11 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1645 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e3\u003c/p\u003e\u003cp\u003e../config/message12 \u0026nbsp; \u0026nbsp; \u0026nbsp;12 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1646 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enasfile\u003c/p\u003e\u003cp\u003e作用：本地nas信息配置文件。该文件包含所有本地nas资料，直通时通过此文件读取本地nas信息。此文件每天维护\u003c/p\u003e\u003cp\u003eareano：属地号\u003c/p\u003e\u003cp\u003edevice：设备型号\u003c/p\u003e\u003cp\u003eaccesstype：接入方式，1表示窄带接入，2表示宽带接入\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e#ip\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eareano\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edevice\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eaccesstype\u003c/p\u003e\u003cp\u003e192.168.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e0001\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eLinkage\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e 2\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edictionary\u003c/p\u003e\u003cp\u003e作用：RADIUS SERVER数据字典。记录目前可以处理的RADIUS属性\u003c/p\u003e\u003cp\u003e标准属性的写法\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; Type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eATTRIBUTE \u0026nbsp; \u0026nbsp; \u0026nbsp; NAS-Port \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;5 \u0026nbsp; \u0026nbsp; \u0026nbsp; integer (0, 0)\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e这表示5号标准属性，属性名称为NAS-Port，数据类型为Int，括号中的内容表示在认证成功和认证失败的报文中是否要包括此属性，‘1’表示最多包括一个，‘0’表示不包括，‘*’表示可包含多个，不写默认为（0,0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e厂商的私有属性写法（26号属性）\u003c/p\u003e\u003cp\u003e厂商名.attr\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e \u0026nbsp;type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003eLinkage.attr \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eLcims-User-Type \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;202 \u0026nbsp; \u0026nbsp; integer\u003c/p\u003e\u003cp\u003e此处的厂商名一定要在vendors中定义，见1.4.9\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003evendors\u003c/p\u003e\u003cp\u003e作用：记录目前可处理的厂商属性标识。在业务系统中各类接入设备的供应商都要在此文件中定义\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003eCisco.attr Cisco.value 9 Cisco\u003c/p\u003e\u003cp\u003e这表示在dictionary文件中用Cisco.attr标识的属性和以Cisco.value标识的属性值为Cisco的私有属性（26号属性所带的），9表示为Cisco的厂商代码（可见rfc1700）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eusers\u003c/p\u003e\u003cp\u003e作用：用户基本上网授权属性配置文件。第一栏是用户名，同一行对应的是认证请求条件，通常为密码。下面对应的是在满足认证请求条件的前提下，RadiusServer需要授权给设备的属性列表。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e如：窄带用户网内有权返回\u003c/p\u003e\u003cp\u003eldimstest \u0026nbsp; \u0026nbsp; \u0026nbsp; Password = \u0026quot;test\u0026quot;\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Service-Type = Framed,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Framed-Protocol = PPP,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Session-Timeout = 10\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003c/p\u003e\u003cp\u003e2.1.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的startradius即可启动相应的radius server；执行bin目录下的stopradius可停掉radius server；执行restartradius可重起radius server。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e直通方法：\u003c/p\u003e\u003cp\u003e1. 核对直通所需的各配置文件是否正常。包括：authfile.abn，clients.abn，nasfile；\u003c/p\u003e\u003cp\u003e2. 如果配置文件非正常，或数据与最新内容有出入，则修改配置或重新生成最新配置文件；\u003c/p\u003e\u003cp\u003e3. 修改配置文件sysconfig，directpass = yes 并保存；\u003c/p\u003e\u003cp\u003e4. 重启radius进程。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e检查radius$date_[n]日志，有全部的本地nas信息和域名信息注册资料，并有“Init MSGQ Succeed!”字样，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列检查\u003c/p\u003e\u003cp\u003e在radius前置机任何路径输入ipcs –qo命令，查看消息队列数是否与RadiusServer进程数相等，是否有堵塞情况。若消息队列数与RadiusServer进程数相等，且无堵塞情况，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e使用测试账号模拟发认证包，检查authok和authfail日志，如果有对应记录，且认证结果符合预期，表明该检查结果正确。模拟发计费包后，检查acct文件，如果有对应记录，表明该检查结果正确；检查detail文件，如果文件存在且更新时间为发包时间，则该检查结果正确。\u003c/p\u003e\u003cp\u003e三步检查都成功，表明radius进程启动成功。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003c/p\u003e\u003cp\u003e2.1.6.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius crontab配置\u003c/p\u003e\u003cp\u003ecrontab设置：\u003c/p\u003e\u003cp\u003e#radius进程、消息队列监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/radius/monitor/monitor_radius.sh \u0026nbsp;\u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/monitor_radius.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时重启radius进程\u003c/p\u003e\u003cp\u003e40 06 * * * ${HOME}/lcims70/radius/bin/restartradius \u0026gt; ${HOME}/lcims70/radius/log/restart.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份detail文件\u003c/p\u003e\u003cp\u003e34 1 * * * ${HOME}/lcims70/radius/monitor/bakdetail.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakdetail.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份日志文件\u003c/p\u003e\u003cp\u003e10 0 * * * ${HOME}/lcims70/radius/monitor/bakradiuslog.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakradiuslog.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时获取直通所需nas和域名信息\u003c/p\u003e\u003cp\u003e22 5 * * * ${HOME}/lcims70/radius/config/getnas.sh \u0026gt; ${HOME}/lcims70/radius/config/nas.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius监控脚本monitor_radius.sh详解\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh流程图\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh阀值说明\u003c/p\u003e\u003cp\u003eMaxBlock：消息队列堵塞个数阀值，默认值30\u003c/p\u003e\u003cp\u003eMsgCheckWait：消息队列下次检查等待时间，默认值3秒\u003c/p\u003e\u003cp\u003eRestartCheckTimes：消息队列连续检查次数阀值，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassCheckTimes：普通重启次数阀值，重启次数超过这个阀值就直通，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassHoldTimes：直通时间阀值，超过这个时间就恢复非直通，默认值5分钟\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius告警并自动重启的条件\u003c/p\u003e\u003cp\u003ea)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞个数超过配置阀值；\u003c/p\u003e\u003cp\u003eb)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包不通或认证失败。\u003c/p\u003e\u003cp\u003e4、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动直通的条件\u003c/p\u003e\u003cp\u003eRadius第一次重启到radius恢复正常（消息队列不堵）之前，重启次数超过配置阀值。\u003c/p\u003e\u003cp\u003e5、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动的从直通中恢复的条件\u003c/p\u003e\u003cp\u003e直通时间大于配置阀值。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius短信告警分析及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞\u003c/p\u003e\u003cp\u003e告警内容举例：”radius01:radius restart1.auth msg block 231”\u003c/p\u003e\u003cp\u003e告警原因：消息队列堵塞，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大量认证包，造成radius进程处理不过来。此种情况一般不会发生；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理缓慢，造成此结果通常有两个原因：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大批量用户资料更新，造成同步程序占用过多磁盘io，导致认证程序取用户资料缓慢；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据库出现问题，造成在线程序取用户在线资料失败或缓慢\u003c/p\u003e\u003cp\u003ec）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e某个RadiusServer进程宕了\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警信息短时间内只收到一条，radius进程已自行重启，无需登录主机查看；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警短信短时间内连续出现，需做以下步骤的检查：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录发生告警的radius主机，检查是否每个RadiusServer进程都在，若有进程消失，说明是radius的问题。重启radius后若同样的错误还是会发生，改直通并联系开发人员查错；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若所有消息队列都在堵塞，登录发生告警的radius主机对应的billing主机，检查认证日志，查看一个认证包的处理时间，若处理时间明显长于平时（毫秒级），继续检查是哪一步占用时间比较长。根据上述分析，通常占用时间长的会是取用户资料或查在线。\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是认证程序取用户资料时间过长，修改同步配置，重启同步配置。修改方法见下文\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是查询在线时间过长，尝试重启在线和认证程序。若还是没效果，启动nodb认证模式，登陆数据库主机检查数据库CPU及磁盘使用情况，确定数据库异常原因，联系相关人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包无回应\u003c/p\u003e\u003cp\u003e告警内容举例：“radius restart 1.auth abnormal”\u003c/p\u003e\u003cp\u003e告警原因：radius监控模拟发包无回应，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer进程宕了；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理时间超过模拟发包软件的超时时间，而造成这一结果的原因与消息队列堵塞原因类似。\u003c/p\u003e\u003cp\u003e处理方法：同消息队列堵塞\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e磁盘空间告警\u003c/p\u003e\u003cp\u003e告警内容举例：“raidust:direcroty:/radius--used:80%s”\u003c/p\u003e\u003cp\u003e告警原因：日志或备份文件过大，导致磁盘剩余空间不足\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查是否有过大文件，如软件安装程序，抓包文件等，若有，则视情况进行清理。查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的radius前缀日志文件，检查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的acct和detail文件。\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查定时清理磁盘脚本，是否没有定时执行。若定时执行，重新评估该脚本是否需要根据实际情况加以修改。\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e从测试机往每台radius前置机的radius/bin目录ftp上传新的RadiusServer程序，上传时更名为RadiusServer.new\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登陆radius前置机，进入radius/bin目录，执行以下操作：\u003c/p\u003e\u003cp\u003emv RadiusServer RadiusServer.${date}\u003c/p\u003e\u003cp\u003emv RadiusServer.new RadiusServer\u003c/p\u003e\u003cp\u003echmod +x RadiusServer\u003c/p\u003e\u003cp\u003erestartradius\u003c/p\u003e\u003cp\u003e其中 ${date} 为更新时间\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e更新后检查\u003c/p\u003e\u003cp\u003e1）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看日志，检查程序启动情况；\u003c/p\u003e\u003cp\u003e2）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包，分别检查正常业务和新版本更新业务。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003c/p\u003e\u003cp\u003e2.1.8.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费系统概述\u003c/p\u003e\u003cp\u003e随着用户数量的不断增加，计费包的数量也不断的加大，原来的计费方式为直接连接计费Server进行计费，一但数据库出现问题或者包数过多的话就会造成计费包丢失，而且由于radius要等待计费Server计费完毕才能回应信息给接入设备，一但超时，接入设备会再次重发计费包，造成计费系统更大的处理负担。\u003c/p\u003e\u003cp\u003e现在准备增加文件缓冲计费的模块，Radius接收到计费包后写入计费文件，然后就给接入设备回应，而文件缓冲计费程序从计费文件中读出计费信息传给计费server进行计费，这样用文件作为缓冲池可以在计费包多的时候先把计费包记录下来，再去计费，不会造成丢包。\u003c/p\u003e\u003cp\u003e由于读取计费文件是实时的计费不会有太长时间的等待，基本可以在几秒内将用户的清单入库。\u003c/p\u003e\u003cp\u003e2.1.8.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate：FileRating程序主目录\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive：FileAlive程序主目录（目前只有江苏电信版本有）\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online：FileOnline程序主目录\u003c/p\u003e\u003cp\u003e其中：\u003c/p\u003e\u003cp\u003ebin：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放可执行程序，启停脚本，监控脚本\u003c/p\u003e\u003cp\u003econfig：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放配置文件\u003c/p\u003e\u003cp\u003elog：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放日志文件\u003c/p\u003e\u003cp\u003e2.1.8.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费进程说明\u003c/p\u003e\u003cp\u003e文件计费进程，由FileOnline，FileRating，FileAlive三个进程组成，分别将radius收到的计费包发送给不同的后台程序进行处理。其中FileOnline和FileRating必须起，FileAlive根据实际情况加以启停。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eFileOnline：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_ONLINE发送计费包，用于生成在线信息；\u003c/p\u003e\u003cp\u003eFileRating：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_RATING发送计费包，用于生成清单信息；\u003c/p\u003e\u003cp\u003eFileAlive：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读取radius产生的计费原始话单，将话单中的起始包，中间包和结束包发送给AB_ALIVE；\u003c/p\u003e\u003cp\u003eFileStatus：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e用于监控文件计费进程处理速度。\u003c/p\u003e\u003cp\u003e2.1.8.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费配置文件配置\u003c/p\u003e\u003cp\u003e配置文件：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/rate/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/alive/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/online/config/system.cfg\u003c/p\u003e\u003cp\u003e作用：文件计费配置文件，配置程序相关路径、日志级别、线程数等。\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e[LOGFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件配置\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/fileacct/rate/log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME =file.log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\u003c/span\u003e#日志文件名\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;LEVEL = NOTE\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\t\u003c/span\u003e#日志级别 （注1）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[RECORDFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件配置 （注2）\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/config\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME = RatingConfig.ini\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#Record配置文件名\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[DATAFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Radius的detail文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/radacct\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[THREADNUM]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e#线程数\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;NUMBER = 4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e注1：日志级别分为ALL、DEBUG、NOTE、WARN、ERROR，一般情况下使用NOTE级别\u003c/p\u003e\u003cp\u003eALL：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印全部日志。\u003c/p\u003e\u003cp\u003eDEBUG：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印调试日志。该日志级别会打印出detail文件中每一个包的发送及回应日志。日志文件会非常大，且在一定程度上影响到程序的效率。建议在调试阶段使用。\u003c/p\u003e\u003cp\u003eNOTE：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印普通日志。该日志级别会打印出文件计费进程读取每个detail文件的开始时间和读取完成时间。正常情况下建议使用该日志级别。\u003c/p\u003e\u003cp\u003eWARN：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印告警日志。\u003c/p\u003e\u003cp\u003eERROR：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印错误日志。\u003c/p\u003e\u003cp\u003e注2：Record配置文件为radius和文件计费共同使用。Radius每新写一个detail文件，将该detail文件名写入Record文件；文件计费程序启动时读取Record文件，获得上次读的detail文件名，及上次读到的位置。每处理一行detail记录，将文件偏移量移到该记录下一条开始处。详见文件计费详细设计文档。\u003c/p\u003e\u003cp\u003e2.1.8.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费日志说明\u003c/p\u003e\u003cp\u003e目录：\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive/log\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003efile.log：记录文件计费启动情况，运行情况。\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:18 [NOTE ] Creating ThreadPool ..............\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Current Create 6 Thread,0 Failure\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Now Read Data File [/data1/lcims/lcims70/radius/radacct/detail.20111212_11]!\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 其中：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eCreating ThreadPool表示正在建立线程\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eCurrent Create 6 Thread,0 Failure 表示6个线程全部建立成功\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eNow Read Data File 表示正在处理的detail文件名\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eFileRating.log：文件计费启停日志。\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:15 Stop FileRating(pid=9055)\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:26 FileRating(pid=18373) started.\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的start.sh即可启动相应的文件计费进程；执行bin目录下的stop.sh可停掉文件计费进程。\u003c/p\u003e\u003cp\u003e2.1.8.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程检查\u003c/p\u003e\u003cp\u003e以FileOnline为例，运行start.sh后，若启动成功，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline(pid=24504) started.\u003c/p\u003e\u003cp\u003e若启动失败，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline failed to start, check log for details!\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e启动后，检查file.log日志，若启动成功，日志显示“Current Create 6 Thread,0 Failure”，若启动失败，日志显示“Create ThreadPool Failure!”。失败原因比较复杂多变，建议联系开发人员。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e模拟发送计费包，检查文件计费进程对计费包进行处理。若后台在线或计费程序收到相应的计费包，启动成功。\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003c/p\u003e\u003cp\u003e2.1.9.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费crontab配置\u003c/p\u003e\u003cp\u003e#FileOnline监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileOnline 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileRating监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileRating 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileAlive监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileAlive 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e2.1.9.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费监控脚本说明\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_fileacct.sh\u003c/p\u003e\u003cp\u003e参数：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程名\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e此脚本可用来监控文件计费进程的运行情况。运行情况分为两类：\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查文件计费进程是否存在，若不存在，尝试重启进程并告警；\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e每30分钟检查文件计费进程的处理效率，若出现大量拥堵情况则告警。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003estatus.sh\u003c/p\u003e\u003cp\u003e位置：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ebin\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看文件计费进程的工作状态。\u003c/p\u003e\u003cp\u003e示例：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e$ status.sh\u003c/p\u003e\u003cp\u003eVersion:1\u003c/p\u003e\u003cp\u003eCurrent have [1/4] Record\u003c/p\u003e\u003cp\u003eFirst Block 28\u003c/p\u003e\u003cp\u003eCurrent Block 580\u003c/p\u003e\u003cp\u003eprocess file \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :detail.20111108_10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前处理的detail文件\u003c/p\u003e\u003cp\u003efile size(bytes) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#此detail文件的大小\u003c/p\u003e\u003cp\u003eprocess location(bytes)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#进程已处理到的地方\u003c/p\u003e\u003cp\u003eremain packets \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#剩下未处理的包数\u003c/p\u003e\u003cp\u003eprocess time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :20111108105240\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e#进程处理到的包的开始时间或结束时间\u003c/p\u003e\u003cp\u003enow time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;:20120216091033\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前时间\u003c/p\u003e\u003cp\u003edelay(seconds) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :8633873\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e#延时时长\u003c/p\u003e\u003cp\u003e说明：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eprocess time：当前处理的为开始包，则此时间为开始包的开始时间；当前处理的为结束包，则此事件为结束包的结束时间。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003edelay：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enow time和process time的时间间隔，正常生产环境中，此值一般不会超过1分钟。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e2.1.9.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费短信告警及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程停止\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01`:FileRating,restart!”\u003c/p\u003e\u003cp\u003e告警原因：文件计费进程停止，可能的原因有：程序coredump\u003c/p\u003e\u003cp\u003e处理方法：若同样告警短信短时间内只有一条，可不用处理。后期联系开发人员检查告警发生原因。若同样告警短信短时间内不停出现，检查文件计费后台对应的计费程序是否运行正常。若对应的计费程序运行不正常，尝试重启计费程序，再重启文件计费程序。若仍未能启动成功，立即联系开发人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e大量拥堵\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01 FileRating delay 100 seconds (1000 packets).”\u003c/p\u003e\u003cp\u003e告警原因：后台计费程序处理缓慢。该情况通常在60系统发生，70系统在入库程序做了改进，此种告警一般不会发生。\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003ebilling1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.11\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003ebilling2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.12\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space: pre;\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e","content_source_url":"https://www.baidu.com/","cover_file_id":705,"content_url":null,"news_id":"1461550688","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxFSkA7yfSHunR0hZhaJbbpo","wx_official_account_id":1,"created_at":"2016-04-27T16:00:21.000+08:00","updated_at":"2016-04-27T16:00:21.000+08:00"},{"id":171,"title":"test","author":"mkm","digest":"test test","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"111","content_source_url":"http://baidu.com","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=401982286\u0026idx=1\u0026sn=e19f9fa4af8c873c348c1378387a4ea1#rd","news_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","index":0,"media_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-22T15:32:22.000+08:00"},{"id":208,"title":"图文消息测试1122-33-44","author":"Test","digest":"此处是图文消息的正文","thumb_media_id":"qotJ088R2YkTUAS5SPBMxAP5hMwrriSblwVBMlx0ZYk","show_cover_pic":0,"content":"\u003cp\u003e此处是图文消息的正文\u003cbr  /\u003e\u003c/p\u003e\u003cp\u003e\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"http://mmbiz.qpic.cn/mmbiz/dceprvV3vaLMGEy3ticJLn8mRaOwDicgCXxZ69Quw9orNYUsSB0w7YHSlVU9jIXWRmYs1cC2dKefQAfuUu5GCqzw/0?wx_fmt=jpeg\" data-ratio=\"0.6348920863309353\" data-w=\"\"  /\u003e\u003cbr  /\u003e\u003c/p\u003e","content_source_url":"http://www.sohu.com","cover_file_id":717,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198290\u0026idx=1\u0026sn=c9ae1956654812f3273b2a0deec2deba#rd","news_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","wx_official_account_id":1,"created_at":"2016-04-22T15:04:24.000+08:00","updated_at":"2016-04-22T16:54:53.000+08:00"},{"id":170,"title":"logrotate","author":"test","digest":"测试","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cpre accuse=\"aContent\" class=\"best-text mb-10\" style=\"\"\u003e你的配置虽然简单还是正确的\u003cbr  /\u003elogrotate 是帮助 rotate 日志文\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"https://mmbiz.qlogo.cn/mmbiz/dceprvV3vaLUZTzZuvWExkdyq2VJ3X81JbLUicUQ223UGib0sCJuAuXZCqS0iboLHxJXBYCVhZyXW4AmeG0NQfCdA/0?wx_fmt=jpeg\" data-ratio=\"1\" data-w=\"200\"  /\u003e\u003cbr  /\u003e\u003c/pre\u003e","content_source_url":"http://zhidao.baidu.com/link?url=FrOVCJhnq3k_EwbudhsAWOYGou0bAF_eAYbrf1moqgxdfoG0e4w37DvPC-hqfBAGeLnkNTLKuNEJjqp361OnAq","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198201\u0026idx=1\u0026sn=80f0362b032f9c2175816d93b3a17ad2#rd","news_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-21T14:51:23.000+08:00"}]
2016-04-28 15:04:29 INFO WxMenusController index action begin...
2016-04-28 15:04:30 INFO [{"id":242,"title":"Test3633","author":"liug","digest":"联创亚信科技(南京)有限公司","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cp\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e（V1.0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e密级：机密\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e联创亚信科技(南京)有限公司\u003c/p\u003e\u003cp\u003e2012年3月\u003c/p\u003e\u003cp\u003e文 档 信 息\u003c/p\u003e\u003cp\u003e文 档 名 称\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e归 档 部 门\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文 档 编 号:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eAILK-NBS-DATA-STD-003\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003c/p\u003e\u003cp\u003e文 档 变 更 记 录\u003c/p\u003e\u003cp\u003e版 本 编 号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版 本 日 期\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e作 者\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e说 明\u003c/p\u003e\u003cp\u003eV1.0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2012-3-23\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e胡元皓、沙先伟、李开衡、翟高星、薛建江\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e初稿\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e审 核\u003c/p\u003e\u003cp\u003e审核组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e审核代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e批 准\u003c/p\u003e\u003cp\u003e批准组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e批准代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目 录\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e6\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e15\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e16\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e19\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e20\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e23\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e26\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e30\u003c/p\u003e\u003cp\u003e2.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e40\u003c/p\u003e\u003cp\u003e2.2.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e46\u003c/p\u003e\u003cp\u003e2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e内存数据库\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e配置文件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e48\u003c/p\u003e\u003cp\u003e2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信告警\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e49\u003c/p\u003e\u003cp\u003e2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e附件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e2.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台程序相关总表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理和自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e60\u003c/p\u003e\u003cp\u003e3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e65\u003c/p\u003e\u003cp\u003e4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e76\u003c/p\u003e\u003cp\u003e5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信开通\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e130\u003c/p\u003e\u003cp\u003e5.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e150\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中${HOME}非特殊说明下，均指lcims用户的主目录。\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中非特殊说明下，均是指以lcims用户登录进行维护。\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003eRadius1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003eRadius2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003c/p\u003e\u003cp\u003e2.1.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/bin：存放radius可执行程序，启停脚本，监控脚本，模拟发包脚本\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/config：存放radius相关配置文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/log：存放radius产生的日志文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/radacct：存放radius产生的原始话单文件\u003c/p\u003e\u003cp\u003e2.1.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius进程运行说明\u003c/p\u003e\u003cp\u003e一套完整的radius程序主要由rad_collect、roam_collect、RadiusServer三组进程组成，它们分工协作，共同完成radius包的采集，解析，处理，转发，回包等工作。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e${HOME}/lcims70/radius/bin\u003c/p\u003e\u003cp\u003eUDP包采集与写消息队列执行程序：\u003c/p\u003e\u003cp\u003erad_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e指定端口UDP包采集与预处理执行程序\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e采集的端口号根据配置文件（radmsg.cfg）的内容指定\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e如：rad_collect 1为采集radmsg.cfg中端口组号为1\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e的端口\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e注：关于radmsg.cfg的配置具体看下面的说明。\u003c/p\u003e\u003cp\u003eroam_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e所有radius进程的漫游端口上的UDP包采集与预处理执行程序。\u003c/p\u003e\u003cp\u003erad_killmsg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e清除消息队列执行程序\u003c/p\u003e\u003cp\u003eRADIUS认证与计费执行程序：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003eRadiusServer\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS主执行程序\u003c/p\u003e\u003cp\u003eRadiusVPDN\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eVPDN代维系统主执行程序\u003c/p\u003e\u003cp\u003estartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动RADIUS批执行程序\u003c/p\u003e\u003cp\u003estopradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e停止RADIUS批执行程序\u003c/p\u003e\u003cp\u003erestartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e重启RADIUS批执行程序\u003c/p\u003e\u003cp\u003eradsend\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS测试发包程序\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eRADIUS自监控执行程序：\u003c/p\u003e\u003cp\u003emsgcount\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e： 消息队列监控程序\u003c/p\u003e\u003cp\u003elcims_alarm \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e： RADIUS告警程序\u003c/p\u003e\u003cp\u003e2.1.3.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer的参数说明\u003c/p\u003e\u003cp\u003e-1 ～ -9 表示从哪个消息读取数据包，1～9对应radmsg.cfg中的消息队列号\u003c/p\u003e\u003cp\u003e-b表示关闭logfile日志文件\u003c/p\u003e\u003cp\u003e-x表示打开x_debug.log日志文件\u003c/p\u003e\u003cp\u003e-j表示此server为计费server\u003c/p\u003e\u003cp\u003e-U表示此server为认证直通\u003c/p\u003e\u003cp\u003e-V表示此server为计费直通。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius日志说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/log\u003c/p\u003e\u003cp\u003einfo_auth*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e认证RADIUS启停log，每个认证RadiusServer产生一个\u003c/p\u003e\u003cp\u003einfo_acct*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e计费RADIUS启停log，每个计费RadiusServer产生一个\u003c/p\u003e\u003cp\u003eauth1645.msg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e消息队列log\u003c/p\u003e\u003cp\u003eerror_info\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eRADIUS SERVER重起信息log\u003c/p\u003e\u003cp\u003eradius$date_[1-5]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e认证RADIUS运行日志\u003c/p\u003e\u003cp\u003eradius$date_[6-8]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e计费RADIUS运行日志\u003c/p\u003e\u003cp\u003eauthok.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证成功的用户信息\u003c/p\u003e\u003cp\u003eauthfail.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证失败的用户信息\u003c/p\u003e\u003cp\u003eerrorpacket.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eRADIUS SERVER的每天被丢弃的错包信息\u003c/p\u003e\u003cp\u003e2.1.3.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius的detail文件说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/radacct\u003c/p\u003e\u003cp\u003eacct.（date）(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e文本方式的用户计费信息文件\u003c/p\u003e\u003cp\u003eerracct.(date)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e异常情况下未计费的用户detail文件\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e二进制方式用户计费信息文件\u003c/p\u003e\u003cp\u003e处理说明：\u003c/p\u003e\u003cp\u003eerracct.(date)(pid)文件计费子系统会回收的。\u003c/p\u003e\u003cp\u003eacct.(date)(pid)文件是用户上网情况的原始记录，可用户查询也可用于重计费。\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 文件计费进程读该文件。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/config\u003c/p\u003e\u003cp\u003e2.1.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003esysconfig\u003c/p\u003e\u003cp\u003e文件名：sysconfig\u003c/p\u003e\u003cp\u003e作用：Radius系统配置文件\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e#数据库的连接出现问题时，是否直接让帐号用户认证通过\u003c/p\u003e\u003cp\u003edirectpass = no\u003c/p\u003e\u003cp\u003e#省内NAS SECRET\u003c/p\u003e\u003cp\u003elocalsecret = xxxxxx\u003c/p\u003e\u003cp\u003e#省内域名\u003c/p\u003e\u003cp\u003elocalrealm = js.cn\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e#RadiusServer的服务类型是宽带还是窄带等\u003c/p\u003e\u003cp\u003e#类型有：\u003c/p\u003e\u003cp\u003e#narrowband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e窄带\u003c/p\u003e\u003cp\u003e#broadband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e宽带\u003c/p\u003e\u003cp\u003e#ALL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e宽窄带合一\u003c/p\u003e\u003cp\u003eService = ALL\u003c/p\u003e\u003cp\u003e#默认域名（即没有注册的域名）允许的被叫\u003c/p\u003e\u003cp\u003eDefault_Called = 163,17999,179,16300,16306,16388,169,1183300,9163\u003c/p\u003e\u003cp\u003e#用户默认的最大上网时长\u003c/p\u003e\u003cp\u003eTimeout = 8640000\u003c/p\u003e\u003cp\u003e#用户默认的最大上网流量（K为单位）\u003c/p\u003e\u003cp\u003eFlowout = 1073741824\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e#交换机地址\u003c/p\u003e\u003cp\u003e\u0026nbsp;alteon1 = 192.168.53.1\u003c/p\u003e\u003cp\u003ealteon2 = 192.168.53.2\u003c/p\u003e\u003cp\u003ealteon3 = 192.168.53.3\u003c/p\u003e\u003cp\u003e#是否文件计费\u003c/p\u003e\u003cp\u003eFileAcct = yes\u003c/p\u003e\u003cp\u003e#文件计费记录文件\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/OnlineConfig.ini\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/RatingConfig.ini\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile\u003c/p\u003e\u003cp\u003e文件名：authfile\u003c/p\u003e\u003cp\u003e作用：域名配置文件。配置域名的认证类型和转发地址，其中认证类型有：\u003c/p\u003e\u003cp\u003eDATABASE:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e表示本地认证\u003c/p\u003e\u003cp\u003eRADIUS\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e表示漫游认证\u003c/p\u003e\u003cp\u003eDeny\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; 表示拒绝认证\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e域名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e处理AATV\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e地址\u003c/p\u003e\u003cp\u003eNULL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;DEFAULT \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;peap.com \u0026nbsp; \u0026nbsp; \u0026nbsp; RADIUS \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; 221.130.120.179\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e注：现在域名信息一般通过业务系统存放在数据库中BD_AUTHTYPE表中，此文件中域名配置优先级高于BD_AUTHTYPE。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的域名配置文件。该文件格式跟authfile.abn一样，包括authfile文件和数据库中的所有的域名信息，每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients\u003c/p\u003e\u003cp\u003e作用：客户端(NAS,PROXY RADIUS)配置文件。通常用来配置漫游转发设备的地址信息。现在本地客户端信息通过业务系统存放在数据库中BD_NAS表中，而漫游的地址必须存放在此文件中。如果有新的客户端要加入，请在加入后重新启动radius进程。\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp; 源地址\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e密钥\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e类型\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e版本\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; 127.0.0.1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003exxxxx \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003etype = nas \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003ev1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的客户端(NAS,PROXY RADIUS)配置文件。该文件格式跟clients一样，包括clients文件和数据库中所有的设备地址信息。此文件每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eradmsg.cfg\u003c/p\u003e\u003cp\u003e作用：消息队列配置文件。rad_collect和RadiusServer启动时，从该文件读取消息队列配置信息。\u003c/p\u003e\u003cp\u003e消息队列号：对应于每个RadiusServer启动参数-M后的数字。起了多少个RadiusServer，就有多少个消息队列号。RadiusServer根据消息队列号去对应的消息队列中读取报文信息进行处理。\u003c/p\u003e\u003cp\u003e采集端口号：程序监听的udp端口号。\u003c/p\u003e\u003cp\u003e端口组号：对应于rad_collect的启动参数，程序启动时监听在该端口组号对应的采集端口号上。有几个不同的端口组号，就对应几个带不同参数的rad_collect进程。\u003c/p\u003e\u003cp\u003e一个rad_collect进程，监听在一个udp端口上，可以将采集到的数据包根据同一个端口组号对应的消息队列号，写入到不同的消息队列中\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e消息队列文件名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e消息队列号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e采集端口号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e端口组号\u003c/p\u003e\u003cp\u003e../config/message1 \u0026nbsp; \u0026nbsp; \u0026nbsp; 1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1812 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e1\u003c/p\u003e\u003cp\u003e../config/message2 \u0026nbsp; \u0026nbsp; \u0026nbsp; 2 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1813 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e2\u003c/p\u003e\u003cp\u003e../config/message11 \u0026nbsp; \u0026nbsp; \u0026nbsp;11 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1645 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e3\u003c/p\u003e\u003cp\u003e../config/message12 \u0026nbsp; \u0026nbsp; \u0026nbsp;12 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1646 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enasfile\u003c/p\u003e\u003cp\u003e作用：本地nas信息配置文件。该文件包含所有本地nas资料，直通时通过此文件读取本地nas信息。此文件每天维护\u003c/p\u003e\u003cp\u003eareano：属地号\u003c/p\u003e\u003cp\u003edevice：设备型号\u003c/p\u003e\u003cp\u003eaccesstype：接入方式，1表示窄带接入，2表示宽带接入\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e#ip\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eareano\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edevice\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eaccesstype\u003c/p\u003e\u003cp\u003e192.168.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e0001\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eLinkage\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e 2\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edictionary\u003c/p\u003e\u003cp\u003e作用：RADIUS SERVER数据字典。记录目前可以处理的RADIUS属性\u003c/p\u003e\u003cp\u003e标准属性的写法\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; Type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eATTRIBUTE \u0026nbsp; \u0026nbsp; \u0026nbsp; NAS-Port \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;5 \u0026nbsp; \u0026nbsp; \u0026nbsp; integer (0, 0)\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e这表示5号标准属性，属性名称为NAS-Port，数据类型为Int，括号中的内容表示在认证成功和认证失败的报文中是否要包括此属性，‘1’表示最多包括一个，‘0’表示不包括，‘*’表示可包含多个，不写默认为（0,0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e厂商的私有属性写法（26号属性）\u003c/p\u003e\u003cp\u003e厂商名.attr\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e \u0026nbsp;type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003eLinkage.attr \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eLcims-User-Type \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;202 \u0026nbsp; \u0026nbsp; integer\u003c/p\u003e\u003cp\u003e此处的厂商名一定要在vendors中定义，见1.4.9\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003evendors\u003c/p\u003e\u003cp\u003e作用：记录目前可处理的厂商属性标识。在业务系统中各类接入设备的供应商都要在此文件中定义\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003eCisco.attr Cisco.value 9 Cisco\u003c/p\u003e\u003cp\u003e这表示在dictionary文件中用Cisco.attr标识的属性和以Cisco.value标识的属性值为Cisco的私有属性（26号属性所带的），9表示为Cisco的厂商代码（可见rfc1700）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eusers\u003c/p\u003e\u003cp\u003e作用：用户基本上网授权属性配置文件。第一栏是用户名，同一行对应的是认证请求条件，通常为密码。下面对应的是在满足认证请求条件的前提下，RadiusServer需要授权给设备的属性列表。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e如：窄带用户网内有权返回\u003c/p\u003e\u003cp\u003eldimstest \u0026nbsp; \u0026nbsp; \u0026nbsp; Password = \u0026quot;test\u0026quot;\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Service-Type = Framed,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Framed-Protocol = PPP,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Session-Timeout = 10\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003c/p\u003e\u003cp\u003e2.1.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的startradius即可启动相应的radius server；执行bin目录下的stopradius可停掉radius server；执行restartradius可重起radius server。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e直通方法：\u003c/p\u003e\u003cp\u003e1. 核对直通所需的各配置文件是否正常。包括：authfile.abn，clients.abn，nasfile；\u003c/p\u003e\u003cp\u003e2. 如果配置文件非正常，或数据与最新内容有出入，则修改配置或重新生成最新配置文件；\u003c/p\u003e\u003cp\u003e3. 修改配置文件sysconfig，directpass = yes 并保存；\u003c/p\u003e\u003cp\u003e4. 重启radius进程。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e检查radius$date_[n]日志，有全部的本地nas信息和域名信息注册资料，并有“Init MSGQ Succeed!”字样，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列检查\u003c/p\u003e\u003cp\u003e在radius前置机任何路径输入ipcs –qo命令，查看消息队列数是否与RadiusServer进程数相等，是否有堵塞情况。若消息队列数与RadiusServer进程数相等，且无堵塞情况，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e使用测试账号模拟发认证包，检查authok和authfail日志，如果有对应记录，且认证结果符合预期，表明该检查结果正确。模拟发计费包后，检查acct文件，如果有对应记录，表明该检查结果正确；检查detail文件，如果文件存在且更新时间为发包时间，则该检查结果正确。\u003c/p\u003e\u003cp\u003e三步检查都成功，表明radius进程启动成功。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003c/p\u003e\u003cp\u003e2.1.6.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius crontab配置\u003c/p\u003e\u003cp\u003ecrontab设置：\u003c/p\u003e\u003cp\u003e#radius进程、消息队列监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/radius/monitor/monitor_radius.sh \u0026nbsp;\u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/monitor_radius.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时重启radius进程\u003c/p\u003e\u003cp\u003e40 06 * * * ${HOME}/lcims70/radius/bin/restartradius \u0026gt; ${HOME}/lcims70/radius/log/restart.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份detail文件\u003c/p\u003e\u003cp\u003e34 1 * * * ${HOME}/lcims70/radius/monitor/bakdetail.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakdetail.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份日志文件\u003c/p\u003e\u003cp\u003e10 0 * * * ${HOME}/lcims70/radius/monitor/bakradiuslog.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakradiuslog.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时获取直通所需nas和域名信息\u003c/p\u003e\u003cp\u003e22 5 * * * ${HOME}/lcims70/radius/config/getnas.sh \u0026gt; ${HOME}/lcims70/radius/config/nas.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius监控脚本monitor_radius.sh详解\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh流程图\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh阀值说明\u003c/p\u003e\u003cp\u003eMaxBlock：消息队列堵塞个数阀值，默认值30\u003c/p\u003e\u003cp\u003eMsgCheckWait：消息队列下次检查等待时间，默认值3秒\u003c/p\u003e\u003cp\u003eRestartCheckTimes：消息队列连续检查次数阀值，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassCheckTimes：普通重启次数阀值，重启次数超过这个阀值就直通，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassHoldTimes：直通时间阀值，超过这个时间就恢复非直通，默认值5分钟\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius告警并自动重启的条件\u003c/p\u003e\u003cp\u003ea)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞个数超过配置阀值；\u003c/p\u003e\u003cp\u003eb)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包不通或认证失败。\u003c/p\u003e\u003cp\u003e4、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动直通的条件\u003c/p\u003e\u003cp\u003eRadius第一次重启到radius恢复正常（消息队列不堵）之前，重启次数超过配置阀值。\u003c/p\u003e\u003cp\u003e5、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动的从直通中恢复的条件\u003c/p\u003e\u003cp\u003e直通时间大于配置阀值。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius短信告警分析及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞\u003c/p\u003e\u003cp\u003e告警内容举例：”radius01:radius restart1.auth msg block 231”\u003c/p\u003e\u003cp\u003e告警原因：消息队列堵塞，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大量认证包，造成radius进程处理不过来。此种情况一般不会发生；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理缓慢，造成此结果通常有两个原因：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大批量用户资料更新，造成同步程序占用过多磁盘io，导致认证程序取用户资料缓慢；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据库出现问题，造成在线程序取用户在线资料失败或缓慢\u003c/p\u003e\u003cp\u003ec）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e某个RadiusServer进程宕了\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警信息短时间内只收到一条，radius进程已自行重启，无需登录主机查看；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警短信短时间内连续出现，需做以下步骤的检查：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录发生告警的radius主机，检查是否每个RadiusServer进程都在，若有进程消失，说明是radius的问题。重启radius后若同样的错误还是会发生，改直通并联系开发人员查错；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若所有消息队列都在堵塞，登录发生告警的radius主机对应的billing主机，检查认证日志，查看一个认证包的处理时间，若处理时间明显长于平时（毫秒级），继续检查是哪一步占用时间比较长。根据上述分析，通常占用时间长的会是取用户资料或查在线。\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是认证程序取用户资料时间过长，修改同步配置，重启同步配置。修改方法见下文\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是查询在线时间过长，尝试重启在线和认证程序。若还是没效果，启动nodb认证模式，登陆数据库主机检查数据库CPU及磁盘使用情况，确定数据库异常原因，联系相关人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包无回应\u003c/p\u003e\u003cp\u003e告警内容举例：“radius restart 1.auth abnormal”\u003c/p\u003e\u003cp\u003e告警原因：radius监控模拟发包无回应，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer进程宕了；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理时间超过模拟发包软件的超时时间，而造成这一结果的原因与消息队列堵塞原因类似。\u003c/p\u003e\u003cp\u003e处理方法：同消息队列堵塞\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e磁盘空间告警\u003c/p\u003e\u003cp\u003e告警内容举例：“raidust:direcroty:/radius--used:80%s”\u003c/p\u003e\u003cp\u003e告警原因：日志或备份文件过大，导致磁盘剩余空间不足\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查是否有过大文件，如软件安装程序，抓包文件等，若有，则视情况进行清理。查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的radius前缀日志文件，检查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的acct和detail文件。\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查定时清理磁盘脚本，是否没有定时执行。若定时执行，重新评估该脚本是否需要根据实际情况加以修改。\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e从测试机往每台radius前置机的radius/bin目录ftp上传新的RadiusServer程序，上传时更名为RadiusServer.new\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登陆radius前置机，进入radius/bin目录，执行以下操作：\u003c/p\u003e\u003cp\u003emv RadiusServer RadiusServer.${date}\u003c/p\u003e\u003cp\u003emv RadiusServer.new RadiusServer\u003c/p\u003e\u003cp\u003echmod +x RadiusServer\u003c/p\u003e\u003cp\u003erestartradius\u003c/p\u003e\u003cp\u003e其中 ${date} 为更新时间\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e更新后检查\u003c/p\u003e\u003cp\u003e1）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看日志，检查程序启动情况；\u003c/p\u003e\u003cp\u003e2）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包，分别检查正常业务和新版本更新业务。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003c/p\u003e\u003cp\u003e2.1.8.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费系统概述\u003c/p\u003e\u003cp\u003e随着用户数量的不断增加，计费包的数量也不断的加大，原来的计费方式为直接连接计费Server进行计费，一但数据库出现问题或者包数过多的话就会造成计费包丢失，而且由于radius要等待计费Server计费完毕才能回应信息给接入设备，一但超时，接入设备会再次重发计费包，造成计费系统更大的处理负担。\u003c/p\u003e\u003cp\u003e现在准备增加文件缓冲计费的模块，Radius接收到计费包后写入计费文件，然后就给接入设备回应，而文件缓冲计费程序从计费文件中读出计费信息传给计费server进行计费，这样用文件作为缓冲池可以在计费包多的时候先把计费包记录下来，再去计费，不会造成丢包。\u003c/p\u003e\u003cp\u003e由于读取计费文件是实时的计费不会有太长时间的等待，基本可以在几秒内将用户的清单入库。\u003c/p\u003e\u003cp\u003e2.1.8.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate：FileRating程序主目录\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive：FileAlive程序主目录（目前只有江苏电信版本有）\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online：FileOnline程序主目录\u003c/p\u003e\u003cp\u003e其中：\u003c/p\u003e\u003cp\u003ebin：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放可执行程序，启停脚本，监控脚本\u003c/p\u003e\u003cp\u003econfig：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放配置文件\u003c/p\u003e\u003cp\u003elog：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放日志文件\u003c/p\u003e\u003cp\u003e2.1.8.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费进程说明\u003c/p\u003e\u003cp\u003e文件计费进程，由FileOnline，FileRating，FileAlive三个进程组成，分别将radius收到的计费包发送给不同的后台程序进行处理。其中FileOnline和FileRating必须起，FileAlive根据实际情况加以启停。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eFileOnline：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_ONLINE发送计费包，用于生成在线信息；\u003c/p\u003e\u003cp\u003eFileRating：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_RATING发送计费包，用于生成清单信息；\u003c/p\u003e\u003cp\u003eFileAlive：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读取radius产生的计费原始话单，将话单中的起始包，中间包和结束包发送给AB_ALIVE；\u003c/p\u003e\u003cp\u003eFileStatus：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e用于监控文件计费进程处理速度。\u003c/p\u003e\u003cp\u003e2.1.8.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费配置文件配置\u003c/p\u003e\u003cp\u003e配置文件：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/rate/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/alive/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/online/config/system.cfg\u003c/p\u003e\u003cp\u003e作用：文件计费配置文件，配置程序相关路径、日志级别、线程数等。\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e[LOGFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件配置\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/fileacct/rate/log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME =file.log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\u003c/span\u003e#日志文件名\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;LEVEL = NOTE\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\t\u003c/span\u003e#日志级别 （注1）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[RECORDFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件配置 （注2）\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/config\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME = RatingConfig.ini\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#Record配置文件名\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[DATAFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Radius的detail文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/radacct\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[THREADNUM]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e#线程数\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;NUMBER = 4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e注1：日志级别分为ALL、DEBUG、NOTE、WARN、ERROR，一般情况下使用NOTE级别\u003c/p\u003e\u003cp\u003eALL：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印全部日志。\u003c/p\u003e\u003cp\u003eDEBUG：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印调试日志。该日志级别会打印出detail文件中每一个包的发送及回应日志。日志文件会非常大，且在一定程度上影响到程序的效率。建议在调试阶段使用。\u003c/p\u003e\u003cp\u003eNOTE：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印普通日志。该日志级别会打印出文件计费进程读取每个detail文件的开始时间和读取完成时间。正常情况下建议使用该日志级别。\u003c/p\u003e\u003cp\u003eWARN：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印告警日志。\u003c/p\u003e\u003cp\u003eERROR：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印错误日志。\u003c/p\u003e\u003cp\u003e注2：Record配置文件为radius和文件计费共同使用。Radius每新写一个detail文件，将该detail文件名写入Record文件；文件计费程序启动时读取Record文件，获得上次读的detail文件名，及上次读到的位置。每处理一行detail记录，将文件偏移量移到该记录下一条开始处。详见文件计费详细设计文档。\u003c/p\u003e\u003cp\u003e2.1.8.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费日志说明\u003c/p\u003e\u003cp\u003e目录：\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive/log\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003efile.log：记录文件计费启动情况，运行情况。\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:18 [NOTE ] Creating ThreadPool ..............\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Current Create 6 Thread,0 Failure\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Now Read Data File [/data1/lcims/lcims70/radius/radacct/detail.20111212_11]!\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 其中：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eCreating ThreadPool表示正在建立线程\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eCurrent Create 6 Thread,0 Failure 表示6个线程全部建立成功\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eNow Read Data File 表示正在处理的detail文件名\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eFileRating.log：文件计费启停日志。\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:15 Stop FileRating(pid=9055)\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:26 FileRating(pid=18373) started.\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的start.sh即可启动相应的文件计费进程；执行bin目录下的stop.sh可停掉文件计费进程。\u003c/p\u003e\u003cp\u003e2.1.8.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程检查\u003c/p\u003e\u003cp\u003e以FileOnline为例，运行start.sh后，若启动成功，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline(pid=24504) started.\u003c/p\u003e\u003cp\u003e若启动失败，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline failed to start, check log for details!\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e启动后，检查file.log日志，若启动成功，日志显示“Current Create 6 Thread,0 Failure”，若启动失败，日志显示“Create ThreadPool Failure!”。失败原因比较复杂多变，建议联系开发人员。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e模拟发送计费包，检查文件计费进程对计费包进行处理。若后台在线或计费程序收到相应的计费包，启动成功。\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003c/p\u003e\u003cp\u003e2.1.9.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费crontab配置\u003c/p\u003e\u003cp\u003e#FileOnline监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileOnline 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileRating监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileRating 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileAlive监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileAlive 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e2.1.9.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费监控脚本说明\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_fileacct.sh\u003c/p\u003e\u003cp\u003e参数：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程名\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e此脚本可用来监控文件计费进程的运行情况。运行情况分为两类：\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查文件计费进程是否存在，若不存在，尝试重启进程并告警；\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e每30分钟检查文件计费进程的处理效率，若出现大量拥堵情况则告警。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003estatus.sh\u003c/p\u003e\u003cp\u003e位置：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ebin\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看文件计费进程的工作状态。\u003c/p\u003e\u003cp\u003e示例：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e$ status.sh\u003c/p\u003e\u003cp\u003eVersion:1\u003c/p\u003e\u003cp\u003eCurrent have [1/4] Record\u003c/p\u003e\u003cp\u003eFirst Block 28\u003c/p\u003e\u003cp\u003eCurrent Block 580\u003c/p\u003e\u003cp\u003eprocess file \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :detail.20111108_10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前处理的detail文件\u003c/p\u003e\u003cp\u003efile size(bytes) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#此detail文件的大小\u003c/p\u003e\u003cp\u003eprocess location(bytes)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#进程已处理到的地方\u003c/p\u003e\u003cp\u003eremain packets \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#剩下未处理的包数\u003c/p\u003e\u003cp\u003eprocess time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :20111108105240\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e#进程处理到的包的开始时间或结束时间\u003c/p\u003e\u003cp\u003enow time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;:20120216091033\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前时间\u003c/p\u003e\u003cp\u003edelay(seconds) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :8633873\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e#延时时长\u003c/p\u003e\u003cp\u003e说明：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eprocess time：当前处理的为开始包，则此时间为开始包的开始时间；当前处理的为结束包，则此事件为结束包的结束时间。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003edelay：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enow time和process time的时间间隔，正常生产环境中，此值一般不会超过1分钟。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e2.1.9.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费短信告警及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程停止\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01`:FileRating,restart!”\u003c/p\u003e\u003cp\u003e告警原因：文件计费进程停止，可能的原因有：程序coredump\u003c/p\u003e\u003cp\u003e处理方法：若同样告警短信短时间内只有一条，可不用处理。后期联系开发人员检查告警发生原因。若同样告警短信短时间内不停出现，检查文件计费后台对应的计费程序是否运行正常。若对应的计费程序运行不正常，尝试重启计费程序，再重启文件计费程序。若仍未能启动成功，立即联系开发人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e大量拥堵\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01 FileRating delay 100 seconds (1000 packets).”\u003c/p\u003e\u003cp\u003e告警原因：后台计费程序处理缓慢。该情况通常在60系统发生，70系统在入库程序做了改进，此种告警一般不会发生。\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003ebilling1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.11\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003ebilling2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.12\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space: pre;\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e","content_source_url":"https://www.baidu.com/","cover_file_id":705,"content_url":null,"news_id":"1461550688","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxFSkA7yfSHunR0hZhaJbbpo","wx_official_account_id":1,"created_at":"2016-04-27T16:00:21.000+08:00","updated_at":"2016-04-27T16:00:21.000+08:00"},{"id":171,"title":"test","author":"mkm","digest":"test test","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"111","content_source_url":"http://baidu.com","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=401982286\u0026idx=1\u0026sn=e19f9fa4af8c873c348c1378387a4ea1#rd","news_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","index":0,"media_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-22T15:32:22.000+08:00"},{"id":208,"title":"图文消息测试1122-33-44","author":"Test","digest":"此处是图文消息的正文","thumb_media_id":"qotJ088R2YkTUAS5SPBMxAP5hMwrriSblwVBMlx0ZYk","show_cover_pic":0,"content":"\u003cp\u003e此处是图文消息的正文\u003cbr  /\u003e\u003c/p\u003e\u003cp\u003e\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"http://mmbiz.qpic.cn/mmbiz/dceprvV3vaLMGEy3ticJLn8mRaOwDicgCXxZ69Quw9orNYUsSB0w7YHSlVU9jIXWRmYs1cC2dKefQAfuUu5GCqzw/0?wx_fmt=jpeg\" data-ratio=\"0.6348920863309353\" data-w=\"\"  /\u003e\u003cbr  /\u003e\u003c/p\u003e","content_source_url":"http://www.sohu.com","cover_file_id":717,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198290\u0026idx=1\u0026sn=c9ae1956654812f3273b2a0deec2deba#rd","news_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","wx_official_account_id":1,"created_at":"2016-04-22T15:04:24.000+08:00","updated_at":"2016-04-22T16:54:53.000+08:00"},{"id":170,"title":"logrotate","author":"test","digest":"测试","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cpre accuse=\"aContent\" class=\"best-text mb-10\" style=\"\"\u003e你的配置虽然简单还是正确的\u003cbr  /\u003elogrotate 是帮助 rotate 日志文\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"https://mmbiz.qlogo.cn/mmbiz/dceprvV3vaLUZTzZuvWExkdyq2VJ3X81JbLUicUQ223UGib0sCJuAuXZCqS0iboLHxJXBYCVhZyXW4AmeG0NQfCdA/0?wx_fmt=jpeg\" data-ratio=\"1\" data-w=\"200\"  /\u003e\u003cbr  /\u003e\u003c/pre\u003e","content_source_url":"http://zhidao.baidu.com/link?url=FrOVCJhnq3k_EwbudhsAWOYGou0bAF_eAYbrf1moqgxdfoG0e4w37DvPC-hqfBAGeLnkNTLKuNEJjqp361OnAq","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198201\u0026idx=1\u0026sn=80f0362b032f9c2175816d93b3a17ad2#rd","news_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-21T14:51:23.000+08:00"}]
2016-04-28 15:15:33 INFO WxMenusController index action begin...
2016-04-28 15:15:33 INFO [{"id":242,"title":"Test3633","author":"liug","digest":"联创亚信科技(南京)有限公司","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cp\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e（V1.0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e密级：机密\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e联创亚信科技(南京)有限公司\u003c/p\u003e\u003cp\u003e2012年3月\u003c/p\u003e\u003cp\u003e文 档 信 息\u003c/p\u003e\u003cp\u003e文 档 名 称\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e归 档 部 门\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文 档 编 号:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eAILK-NBS-DATA-STD-003\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003c/p\u003e\u003cp\u003e文 档 变 更 记 录\u003c/p\u003e\u003cp\u003e版 本 编 号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版 本 日 期\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e作 者\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e说 明\u003c/p\u003e\u003cp\u003eV1.0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2012-3-23\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e胡元皓、沙先伟、李开衡、翟高星、薛建江\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e初稿\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e审 核\u003c/p\u003e\u003cp\u003e审核组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e审核代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e批 准\u003c/p\u003e\u003cp\u003e批准组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e批准代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目 录\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e6\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e15\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e16\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e19\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e20\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e23\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e26\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e30\u003c/p\u003e\u003cp\u003e2.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e40\u003c/p\u003e\u003cp\u003e2.2.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e46\u003c/p\u003e\u003cp\u003e2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e内存数据库\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e配置文件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e48\u003c/p\u003e\u003cp\u003e2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信告警\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e49\u003c/p\u003e\u003cp\u003e2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e附件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e2.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台程序相关总表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理和自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e60\u003c/p\u003e\u003cp\u003e3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e65\u003c/p\u003e\u003cp\u003e4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e76\u003c/p\u003e\u003cp\u003e5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信开通\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e130\u003c/p\u003e\u003cp\u003e5.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e150\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中${HOME}非特殊说明下，均指lcims用户的主目录。\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中非特殊说明下，均是指以lcims用户登录进行维护。\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003eRadius1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003eRadius2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003c/p\u003e\u003cp\u003e2.1.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/bin：存放radius可执行程序，启停脚本，监控脚本，模拟发包脚本\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/config：存放radius相关配置文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/log：存放radius产生的日志文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/radacct：存放radius产生的原始话单文件\u003c/p\u003e\u003cp\u003e2.1.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius进程运行说明\u003c/p\u003e\u003cp\u003e一套完整的radius程序主要由rad_collect、roam_collect、RadiusServer三组进程组成，它们分工协作，共同完成radius包的采集，解析，处理，转发，回包等工作。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e${HOME}/lcims70/radius/bin\u003c/p\u003e\u003cp\u003eUDP包采集与写消息队列执行程序：\u003c/p\u003e\u003cp\u003erad_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e指定端口UDP包采集与预处理执行程序\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e采集的端口号根据配置文件（radmsg.cfg）的内容指定\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e如：rad_collect 1为采集radmsg.cfg中端口组号为1\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e的端口\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e注：关于radmsg.cfg的配置具体看下面的说明。\u003c/p\u003e\u003cp\u003eroam_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e所有radius进程的漫游端口上的UDP包采集与预处理执行程序。\u003c/p\u003e\u003cp\u003erad_killmsg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e清除消息队列执行程序\u003c/p\u003e\u003cp\u003eRADIUS认证与计费执行程序：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003eRadiusServer\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS主执行程序\u003c/p\u003e\u003cp\u003eRadiusVPDN\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eVPDN代维系统主执行程序\u003c/p\u003e\u003cp\u003estartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动RADIUS批执行程序\u003c/p\u003e\u003cp\u003estopradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e停止RADIUS批执行程序\u003c/p\u003e\u003cp\u003erestartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e重启RADIUS批执行程序\u003c/p\u003e\u003cp\u003eradsend\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS测试发包程序\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eRADIUS自监控执行程序：\u003c/p\u003e\u003cp\u003emsgcount\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e： 消息队列监控程序\u003c/p\u003e\u003cp\u003elcims_alarm \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e： RADIUS告警程序\u003c/p\u003e\u003cp\u003e2.1.3.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer的参数说明\u003c/p\u003e\u003cp\u003e-1 ～ -9 表示从哪个消息读取数据包，1～9对应radmsg.cfg中的消息队列号\u003c/p\u003e\u003cp\u003e-b表示关闭logfile日志文件\u003c/p\u003e\u003cp\u003e-x表示打开x_debug.log日志文件\u003c/p\u003e\u003cp\u003e-j表示此server为计费server\u003c/p\u003e\u003cp\u003e-U表示此server为认证直通\u003c/p\u003e\u003cp\u003e-V表示此server为计费直通。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius日志说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/log\u003c/p\u003e\u003cp\u003einfo_auth*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e认证RADIUS启停log，每个认证RadiusServer产生一个\u003c/p\u003e\u003cp\u003einfo_acct*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e计费RADIUS启停log，每个计费RadiusServer产生一个\u003c/p\u003e\u003cp\u003eauth1645.msg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e消息队列log\u003c/p\u003e\u003cp\u003eerror_info\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eRADIUS SERVER重起信息log\u003c/p\u003e\u003cp\u003eradius$date_[1-5]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e认证RADIUS运行日志\u003c/p\u003e\u003cp\u003eradius$date_[6-8]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e计费RADIUS运行日志\u003c/p\u003e\u003cp\u003eauthok.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证成功的用户信息\u003c/p\u003e\u003cp\u003eauthfail.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证失败的用户信息\u003c/p\u003e\u003cp\u003eerrorpacket.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eRADIUS SERVER的每天被丢弃的错包信息\u003c/p\u003e\u003cp\u003e2.1.3.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius的detail文件说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/radacct\u003c/p\u003e\u003cp\u003eacct.（date）(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e文本方式的用户计费信息文件\u003c/p\u003e\u003cp\u003eerracct.(date)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e异常情况下未计费的用户detail文件\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e二进制方式用户计费信息文件\u003c/p\u003e\u003cp\u003e处理说明：\u003c/p\u003e\u003cp\u003eerracct.(date)(pid)文件计费子系统会回收的。\u003c/p\u003e\u003cp\u003eacct.(date)(pid)文件是用户上网情况的原始记录，可用户查询也可用于重计费。\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 文件计费进程读该文件。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/config\u003c/p\u003e\u003cp\u003e2.1.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003esysconfig\u003c/p\u003e\u003cp\u003e文件名：sysconfig\u003c/p\u003e\u003cp\u003e作用：Radius系统配置文件\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e#数据库的连接出现问题时，是否直接让帐号用户认证通过\u003c/p\u003e\u003cp\u003edirectpass = no\u003c/p\u003e\u003cp\u003e#省内NAS SECRET\u003c/p\u003e\u003cp\u003elocalsecret = xxxxxx\u003c/p\u003e\u003cp\u003e#省内域名\u003c/p\u003e\u003cp\u003elocalrealm = js.cn\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e#RadiusServer的服务类型是宽带还是窄带等\u003c/p\u003e\u003cp\u003e#类型有：\u003c/p\u003e\u003cp\u003e#narrowband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e窄带\u003c/p\u003e\u003cp\u003e#broadband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e宽带\u003c/p\u003e\u003cp\u003e#ALL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e宽窄带合一\u003c/p\u003e\u003cp\u003eService = ALL\u003c/p\u003e\u003cp\u003e#默认域名（即没有注册的域名）允许的被叫\u003c/p\u003e\u003cp\u003eDefault_Called = 163,17999,179,16300,16306,16388,169,1183300,9163\u003c/p\u003e\u003cp\u003e#用户默认的最大上网时长\u003c/p\u003e\u003cp\u003eTimeout = 8640000\u003c/p\u003e\u003cp\u003e#用户默认的最大上网流量（K为单位）\u003c/p\u003e\u003cp\u003eFlowout = 1073741824\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e#交换机地址\u003c/p\u003e\u003cp\u003e\u0026nbsp;alteon1 = 192.168.53.1\u003c/p\u003e\u003cp\u003ealteon2 = 192.168.53.2\u003c/p\u003e\u003cp\u003ealteon3 = 192.168.53.3\u003c/p\u003e\u003cp\u003e#是否文件计费\u003c/p\u003e\u003cp\u003eFileAcct = yes\u003c/p\u003e\u003cp\u003e#文件计费记录文件\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/OnlineConfig.ini\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/RatingConfig.ini\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile\u003c/p\u003e\u003cp\u003e文件名：authfile\u003c/p\u003e\u003cp\u003e作用：域名配置文件。配置域名的认证类型和转发地址，其中认证类型有：\u003c/p\u003e\u003cp\u003eDATABASE:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e表示本地认证\u003c/p\u003e\u003cp\u003eRADIUS\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e表示漫游认证\u003c/p\u003e\u003cp\u003eDeny\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; 表示拒绝认证\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e域名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e处理AATV\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e地址\u003c/p\u003e\u003cp\u003eNULL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;DEFAULT \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;peap.com \u0026nbsp; \u0026nbsp; \u0026nbsp; RADIUS \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; 221.130.120.179\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e注：现在域名信息一般通过业务系统存放在数据库中BD_AUTHTYPE表中，此文件中域名配置优先级高于BD_AUTHTYPE。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的域名配置文件。该文件格式跟authfile.abn一样，包括authfile文件和数据库中的所有的域名信息，每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients\u003c/p\u003e\u003cp\u003e作用：客户端(NAS,PROXY RADIUS)配置文件。通常用来配置漫游转发设备的地址信息。现在本地客户端信息通过业务系统存放在数据库中BD_NAS表中，而漫游的地址必须存放在此文件中。如果有新的客户端要加入，请在加入后重新启动radius进程。\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp; 源地址\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e密钥\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e类型\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e版本\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; 127.0.0.1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003exxxxx \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003etype = nas \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003ev1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的客户端(NAS,PROXY RADIUS)配置文件。该文件格式跟clients一样，包括clients文件和数据库中所有的设备地址信息。此文件每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eradmsg.cfg\u003c/p\u003e\u003cp\u003e作用：消息队列配置文件。rad_collect和RadiusServer启动时，从该文件读取消息队列配置信息。\u003c/p\u003e\u003cp\u003e消息队列号：对应于每个RadiusServer启动参数-M后的数字。起了多少个RadiusServer，就有多少个消息队列号。RadiusServer根据消息队列号去对应的消息队列中读取报文信息进行处理。\u003c/p\u003e\u003cp\u003e采集端口号：程序监听的udp端口号。\u003c/p\u003e\u003cp\u003e端口组号：对应于rad_collect的启动参数，程序启动时监听在该端口组号对应的采集端口号上。有几个不同的端口组号，就对应几个带不同参数的rad_collect进程。\u003c/p\u003e\u003cp\u003e一个rad_collect进程，监听在一个udp端口上，可以将采集到的数据包根据同一个端口组号对应的消息队列号，写入到不同的消息队列中\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e消息队列文件名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e消息队列号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e采集端口号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e端口组号\u003c/p\u003e\u003cp\u003e../config/message1 \u0026nbsp; \u0026nbsp; \u0026nbsp; 1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1812 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e1\u003c/p\u003e\u003cp\u003e../config/message2 \u0026nbsp; \u0026nbsp; \u0026nbsp; 2 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1813 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e2\u003c/p\u003e\u003cp\u003e../config/message11 \u0026nbsp; \u0026nbsp; \u0026nbsp;11 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1645 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e3\u003c/p\u003e\u003cp\u003e../config/message12 \u0026nbsp; \u0026nbsp; \u0026nbsp;12 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1646 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enasfile\u003c/p\u003e\u003cp\u003e作用：本地nas信息配置文件。该文件包含所有本地nas资料，直通时通过此文件读取本地nas信息。此文件每天维护\u003c/p\u003e\u003cp\u003eareano：属地号\u003c/p\u003e\u003cp\u003edevice：设备型号\u003c/p\u003e\u003cp\u003eaccesstype：接入方式，1表示窄带接入，2表示宽带接入\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e#ip\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eareano\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edevice\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eaccesstype\u003c/p\u003e\u003cp\u003e192.168.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e0001\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eLinkage\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e 2\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edictionary\u003c/p\u003e\u003cp\u003e作用：RADIUS SERVER数据字典。记录目前可以处理的RADIUS属性\u003c/p\u003e\u003cp\u003e标准属性的写法\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; Type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eATTRIBUTE \u0026nbsp; \u0026nbsp; \u0026nbsp; NAS-Port \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;5 \u0026nbsp; \u0026nbsp; \u0026nbsp; integer (0, 0)\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e这表示5号标准属性，属性名称为NAS-Port，数据类型为Int，括号中的内容表示在认证成功和认证失败的报文中是否要包括此属性，‘1’表示最多包括一个，‘0’表示不包括，‘*’表示可包含多个，不写默认为（0,0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e厂商的私有属性写法（26号属性）\u003c/p\u003e\u003cp\u003e厂商名.attr\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e \u0026nbsp;type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003eLinkage.attr \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eLcims-User-Type \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;202 \u0026nbsp; \u0026nbsp; integer\u003c/p\u003e\u003cp\u003e此处的厂商名一定要在vendors中定义，见1.4.9\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003evendors\u003c/p\u003e\u003cp\u003e作用：记录目前可处理的厂商属性标识。在业务系统中各类接入设备的供应商都要在此文件中定义\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003eCisco.attr Cisco.value 9 Cisco\u003c/p\u003e\u003cp\u003e这表示在dictionary文件中用Cisco.attr标识的属性和以Cisco.value标识的属性值为Cisco的私有属性（26号属性所带的），9表示为Cisco的厂商代码（可见rfc1700）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eusers\u003c/p\u003e\u003cp\u003e作用：用户基本上网授权属性配置文件。第一栏是用户名，同一行对应的是认证请求条件，通常为密码。下面对应的是在满足认证请求条件的前提下，RadiusServer需要授权给设备的属性列表。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e如：窄带用户网内有权返回\u003c/p\u003e\u003cp\u003eldimstest \u0026nbsp; \u0026nbsp; \u0026nbsp; Password = \u0026quot;test\u0026quot;\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Service-Type = Framed,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Framed-Protocol = PPP,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Session-Timeout = 10\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003c/p\u003e\u003cp\u003e2.1.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的startradius即可启动相应的radius server；执行bin目录下的stopradius可停掉radius server；执行restartradius可重起radius server。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e直通方法：\u003c/p\u003e\u003cp\u003e1. 核对直通所需的各配置文件是否正常。包括：authfile.abn，clients.abn，nasfile；\u003c/p\u003e\u003cp\u003e2. 如果配置文件非正常，或数据与最新内容有出入，则修改配置或重新生成最新配置文件；\u003c/p\u003e\u003cp\u003e3. 修改配置文件sysconfig，directpass = yes 并保存；\u003c/p\u003e\u003cp\u003e4. 重启radius进程。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e检查radius$date_[n]日志，有全部的本地nas信息和域名信息注册资料，并有“Init MSGQ Succeed!”字样，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列检查\u003c/p\u003e\u003cp\u003e在radius前置机任何路径输入ipcs –qo命令，查看消息队列数是否与RadiusServer进程数相等，是否有堵塞情况。若消息队列数与RadiusServer进程数相等，且无堵塞情况，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e使用测试账号模拟发认证包，检查authok和authfail日志，如果有对应记录，且认证结果符合预期，表明该检查结果正确。模拟发计费包后，检查acct文件，如果有对应记录，表明该检查结果正确；检查detail文件，如果文件存在且更新时间为发包时间，则该检查结果正确。\u003c/p\u003e\u003cp\u003e三步检查都成功，表明radius进程启动成功。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003c/p\u003e\u003cp\u003e2.1.6.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius crontab配置\u003c/p\u003e\u003cp\u003ecrontab设置：\u003c/p\u003e\u003cp\u003e#radius进程、消息队列监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/radius/monitor/monitor_radius.sh \u0026nbsp;\u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/monitor_radius.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时重启radius进程\u003c/p\u003e\u003cp\u003e40 06 * * * ${HOME}/lcims70/radius/bin/restartradius \u0026gt; ${HOME}/lcims70/radius/log/restart.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份detail文件\u003c/p\u003e\u003cp\u003e34 1 * * * ${HOME}/lcims70/radius/monitor/bakdetail.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakdetail.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份日志文件\u003c/p\u003e\u003cp\u003e10 0 * * * ${HOME}/lcims70/radius/monitor/bakradiuslog.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakradiuslog.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时获取直通所需nas和域名信息\u003c/p\u003e\u003cp\u003e22 5 * * * ${HOME}/lcims70/radius/config/getnas.sh \u0026gt; ${HOME}/lcims70/radius/config/nas.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius监控脚本monitor_radius.sh详解\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh流程图\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh阀值说明\u003c/p\u003e\u003cp\u003eMaxBlock：消息队列堵塞个数阀值，默认值30\u003c/p\u003e\u003cp\u003eMsgCheckWait：消息队列下次检查等待时间，默认值3秒\u003c/p\u003e\u003cp\u003eRestartCheckTimes：消息队列连续检查次数阀值，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassCheckTimes：普通重启次数阀值，重启次数超过这个阀值就直通，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassHoldTimes：直通时间阀值，超过这个时间就恢复非直通，默认值5分钟\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius告警并自动重启的条件\u003c/p\u003e\u003cp\u003ea)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞个数超过配置阀值；\u003c/p\u003e\u003cp\u003eb)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包不通或认证失败。\u003c/p\u003e\u003cp\u003e4、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动直通的条件\u003c/p\u003e\u003cp\u003eRadius第一次重启到radius恢复正常（消息队列不堵）之前，重启次数超过配置阀值。\u003c/p\u003e\u003cp\u003e5、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动的从直通中恢复的条件\u003c/p\u003e\u003cp\u003e直通时间大于配置阀值。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius短信告警分析及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞\u003c/p\u003e\u003cp\u003e告警内容举例：”radius01:radius restart1.auth msg block 231”\u003c/p\u003e\u003cp\u003e告警原因：消息队列堵塞，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大量认证包，造成radius进程处理不过来。此种情况一般不会发生；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理缓慢，造成此结果通常有两个原因：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大批量用户资料更新，造成同步程序占用过多磁盘io，导致认证程序取用户资料缓慢；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据库出现问题，造成在线程序取用户在线资料失败或缓慢\u003c/p\u003e\u003cp\u003ec）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e某个RadiusServer进程宕了\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警信息短时间内只收到一条，radius进程已自行重启，无需登录主机查看；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警短信短时间内连续出现，需做以下步骤的检查：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录发生告警的radius主机，检查是否每个RadiusServer进程都在，若有进程消失，说明是radius的问题。重启radius后若同样的错误还是会发生，改直通并联系开发人员查错；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若所有消息队列都在堵塞，登录发生告警的radius主机对应的billing主机，检查认证日志，查看一个认证包的处理时间，若处理时间明显长于平时（毫秒级），继续检查是哪一步占用时间比较长。根据上述分析，通常占用时间长的会是取用户资料或查在线。\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是认证程序取用户资料时间过长，修改同步配置，重启同步配置。修改方法见下文\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是查询在线时间过长，尝试重启在线和认证程序。若还是没效果，启动nodb认证模式，登陆数据库主机检查数据库CPU及磁盘使用情况，确定数据库异常原因，联系相关人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包无回应\u003c/p\u003e\u003cp\u003e告警内容举例：“radius restart 1.auth abnormal”\u003c/p\u003e\u003cp\u003e告警原因：radius监控模拟发包无回应，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer进程宕了；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理时间超过模拟发包软件的超时时间，而造成这一结果的原因与消息队列堵塞原因类似。\u003c/p\u003e\u003cp\u003e处理方法：同消息队列堵塞\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e磁盘空间告警\u003c/p\u003e\u003cp\u003e告警内容举例：“raidust:direcroty:/radius--used:80%s”\u003c/p\u003e\u003cp\u003e告警原因：日志或备份文件过大，导致磁盘剩余空间不足\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查是否有过大文件，如软件安装程序，抓包文件等，若有，则视情况进行清理。查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的radius前缀日志文件，检查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的acct和detail文件。\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查定时清理磁盘脚本，是否没有定时执行。若定时执行，重新评估该脚本是否需要根据实际情况加以修改。\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e从测试机往每台radius前置机的radius/bin目录ftp上传新的RadiusServer程序，上传时更名为RadiusServer.new\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登陆radius前置机，进入radius/bin目录，执行以下操作：\u003c/p\u003e\u003cp\u003emv RadiusServer RadiusServer.${date}\u003c/p\u003e\u003cp\u003emv RadiusServer.new RadiusServer\u003c/p\u003e\u003cp\u003echmod +x RadiusServer\u003c/p\u003e\u003cp\u003erestartradius\u003c/p\u003e\u003cp\u003e其中 ${date} 为更新时间\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e更新后检查\u003c/p\u003e\u003cp\u003e1）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看日志，检查程序启动情况；\u003c/p\u003e\u003cp\u003e2）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包，分别检查正常业务和新版本更新业务。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003c/p\u003e\u003cp\u003e2.1.8.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费系统概述\u003c/p\u003e\u003cp\u003e随着用户数量的不断增加，计费包的数量也不断的加大，原来的计费方式为直接连接计费Server进行计费，一但数据库出现问题或者包数过多的话就会造成计费包丢失，而且由于radius要等待计费Server计费完毕才能回应信息给接入设备，一但超时，接入设备会再次重发计费包，造成计费系统更大的处理负担。\u003c/p\u003e\u003cp\u003e现在准备增加文件缓冲计费的模块，Radius接收到计费包后写入计费文件，然后就给接入设备回应，而文件缓冲计费程序从计费文件中读出计费信息传给计费server进行计费，这样用文件作为缓冲池可以在计费包多的时候先把计费包记录下来，再去计费，不会造成丢包。\u003c/p\u003e\u003cp\u003e由于读取计费文件是实时的计费不会有太长时间的等待，基本可以在几秒内将用户的清单入库。\u003c/p\u003e\u003cp\u003e2.1.8.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate：FileRating程序主目录\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive：FileAlive程序主目录（目前只有江苏电信版本有）\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online：FileOnline程序主目录\u003c/p\u003e\u003cp\u003e其中：\u003c/p\u003e\u003cp\u003ebin：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放可执行程序，启停脚本，监控脚本\u003c/p\u003e\u003cp\u003econfig：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放配置文件\u003c/p\u003e\u003cp\u003elog：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放日志文件\u003c/p\u003e\u003cp\u003e2.1.8.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费进程说明\u003c/p\u003e\u003cp\u003e文件计费进程，由FileOnline，FileRating，FileAlive三个进程组成，分别将radius收到的计费包发送给不同的后台程序进行处理。其中FileOnline和FileRating必须起，FileAlive根据实际情况加以启停。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eFileOnline：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_ONLINE发送计费包，用于生成在线信息；\u003c/p\u003e\u003cp\u003eFileRating：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_RATING发送计费包，用于生成清单信息；\u003c/p\u003e\u003cp\u003eFileAlive：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读取radius产生的计费原始话单，将话单中的起始包，中间包和结束包发送给AB_ALIVE；\u003c/p\u003e\u003cp\u003eFileStatus：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e用于监控文件计费进程处理速度。\u003c/p\u003e\u003cp\u003e2.1.8.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费配置文件配置\u003c/p\u003e\u003cp\u003e配置文件：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/rate/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/alive/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/online/config/system.cfg\u003c/p\u003e\u003cp\u003e作用：文件计费配置文件，配置程序相关路径、日志级别、线程数等。\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e[LOGFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件配置\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/fileacct/rate/log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME =file.log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\u003c/span\u003e#日志文件名\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;LEVEL = NOTE\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\t\u003c/span\u003e#日志级别 （注1）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[RECORDFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件配置 （注2）\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/config\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME = RatingConfig.ini\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#Record配置文件名\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[DATAFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Radius的detail文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/radacct\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[THREADNUM]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e#线程数\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;NUMBER = 4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e注1：日志级别分为ALL、DEBUG、NOTE、WARN、ERROR，一般情况下使用NOTE级别\u003c/p\u003e\u003cp\u003eALL：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印全部日志。\u003c/p\u003e\u003cp\u003eDEBUG：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印调试日志。该日志级别会打印出detail文件中每一个包的发送及回应日志。日志文件会非常大，且在一定程度上影响到程序的效率。建议在调试阶段使用。\u003c/p\u003e\u003cp\u003eNOTE：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印普通日志。该日志级别会打印出文件计费进程读取每个detail文件的开始时间和读取完成时间。正常情况下建议使用该日志级别。\u003c/p\u003e\u003cp\u003eWARN：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印告警日志。\u003c/p\u003e\u003cp\u003eERROR：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印错误日志。\u003c/p\u003e\u003cp\u003e注2：Record配置文件为radius和文件计费共同使用。Radius每新写一个detail文件，将该detail文件名写入Record文件；文件计费程序启动时读取Record文件，获得上次读的detail文件名，及上次读到的位置。每处理一行detail记录，将文件偏移量移到该记录下一条开始处。详见文件计费详细设计文档。\u003c/p\u003e\u003cp\u003e2.1.8.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费日志说明\u003c/p\u003e\u003cp\u003e目录：\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive/log\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003efile.log：记录文件计费启动情况，运行情况。\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:18 [NOTE ] Creating ThreadPool ..............\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Current Create 6 Thread,0 Failure\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Now Read Data File [/data1/lcims/lcims70/radius/radacct/detail.20111212_11]!\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 其中：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eCreating ThreadPool表示正在建立线程\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eCurrent Create 6 Thread,0 Failure 表示6个线程全部建立成功\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eNow Read Data File 表示正在处理的detail文件名\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eFileRating.log：文件计费启停日志。\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:15 Stop FileRating(pid=9055)\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:26 FileRating(pid=18373) started.\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的start.sh即可启动相应的文件计费进程；执行bin目录下的stop.sh可停掉文件计费进程。\u003c/p\u003e\u003cp\u003e2.1.8.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程检查\u003c/p\u003e\u003cp\u003e以FileOnline为例，运行start.sh后，若启动成功，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline(pid=24504) started.\u003c/p\u003e\u003cp\u003e若启动失败，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline failed to start, check log for details!\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e启动后，检查file.log日志，若启动成功，日志显示“Current Create 6 Thread,0 Failure”，若启动失败，日志显示“Create ThreadPool Failure!”。失败原因比较复杂多变，建议联系开发人员。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e模拟发送计费包，检查文件计费进程对计费包进行处理。若后台在线或计费程序收到相应的计费包，启动成功。\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003c/p\u003e\u003cp\u003e2.1.9.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费crontab配置\u003c/p\u003e\u003cp\u003e#FileOnline监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileOnline 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileRating监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileRating 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileAlive监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileAlive 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e2.1.9.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费监控脚本说明\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_fileacct.sh\u003c/p\u003e\u003cp\u003e参数：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程名\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e此脚本可用来监控文件计费进程的运行情况。运行情况分为两类：\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查文件计费进程是否存在，若不存在，尝试重启进程并告警；\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e每30分钟检查文件计费进程的处理效率，若出现大量拥堵情况则告警。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003estatus.sh\u003c/p\u003e\u003cp\u003e位置：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ebin\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看文件计费进程的工作状态。\u003c/p\u003e\u003cp\u003e示例：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e$ status.sh\u003c/p\u003e\u003cp\u003eVersion:1\u003c/p\u003e\u003cp\u003eCurrent have [1/4] Record\u003c/p\u003e\u003cp\u003eFirst Block 28\u003c/p\u003e\u003cp\u003eCurrent Block 580\u003c/p\u003e\u003cp\u003eprocess file \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :detail.20111108_10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前处理的detail文件\u003c/p\u003e\u003cp\u003efile size(bytes) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#此detail文件的大小\u003c/p\u003e\u003cp\u003eprocess location(bytes)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#进程已处理到的地方\u003c/p\u003e\u003cp\u003eremain packets \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#剩下未处理的包数\u003c/p\u003e\u003cp\u003eprocess time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :20111108105240\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e#进程处理到的包的开始时间或结束时间\u003c/p\u003e\u003cp\u003enow time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;:20120216091033\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前时间\u003c/p\u003e\u003cp\u003edelay(seconds) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :8633873\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e#延时时长\u003c/p\u003e\u003cp\u003e说明：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eprocess time：当前处理的为开始包，则此时间为开始包的开始时间；当前处理的为结束包，则此事件为结束包的结束时间。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003edelay：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enow time和process time的时间间隔，正常生产环境中，此值一般不会超过1分钟。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e2.1.9.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费短信告警及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程停止\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01`:FileRating,restart!”\u003c/p\u003e\u003cp\u003e告警原因：文件计费进程停止，可能的原因有：程序coredump\u003c/p\u003e\u003cp\u003e处理方法：若同样告警短信短时间内只有一条，可不用处理。后期联系开发人员检查告警发生原因。若同样告警短信短时间内不停出现，检查文件计费后台对应的计费程序是否运行正常。若对应的计费程序运行不正常，尝试重启计费程序，再重启文件计费程序。若仍未能启动成功，立即联系开发人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e大量拥堵\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01 FileRating delay 100 seconds (1000 packets).”\u003c/p\u003e\u003cp\u003e告警原因：后台计费程序处理缓慢。该情况通常在60系统发生，70系统在入库程序做了改进，此种告警一般不会发生。\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003ebilling1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.11\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003ebilling2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.12\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space: pre;\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e","content_source_url":"https://www.baidu.com/","cover_file_id":705,"content_url":null,"news_id":"1461550688","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxFSkA7yfSHunR0hZhaJbbpo","wx_official_account_id":1,"created_at":"2016-04-27T16:00:21.000+08:00","updated_at":"2016-04-27T16:00:21.000+08:00"},{"id":171,"title":"test","author":"mkm","digest":"test test","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"111","content_source_url":"http://baidu.com","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=401982286\u0026idx=1\u0026sn=e19f9fa4af8c873c348c1378387a4ea1#rd","news_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","index":0,"media_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-22T15:32:22.000+08:00"},{"id":208,"title":"图文消息测试1122-33-44","author":"Test","digest":"此处是图文消息的正文","thumb_media_id":"qotJ088R2YkTUAS5SPBMxAP5hMwrriSblwVBMlx0ZYk","show_cover_pic":0,"content":"\u003cp\u003e此处是图文消息的正文\u003cbr  /\u003e\u003c/p\u003e\u003cp\u003e\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"http://mmbiz.qpic.cn/mmbiz/dceprvV3vaLMGEy3ticJLn8mRaOwDicgCXxZ69Quw9orNYUsSB0w7YHSlVU9jIXWRmYs1cC2dKefQAfuUu5GCqzw/0?wx_fmt=jpeg\" data-ratio=\"0.6348920863309353\" data-w=\"\"  /\u003e\u003cbr  /\u003e\u003c/p\u003e","content_source_url":"http://www.sohu.com","cover_file_id":717,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198290\u0026idx=1\u0026sn=c9ae1956654812f3273b2a0deec2deba#rd","news_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","wx_official_account_id":1,"created_at":"2016-04-22T15:04:24.000+08:00","updated_at":"2016-04-22T16:54:53.000+08:00"},{"id":170,"title":"logrotate","author":"test","digest":"测试","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cpre accuse=\"aContent\" class=\"best-text mb-10\" style=\"\"\u003e你的配置虽然简单还是正确的\u003cbr  /\u003elogrotate 是帮助 rotate 日志文\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"https://mmbiz.qlogo.cn/mmbiz/dceprvV3vaLUZTzZuvWExkdyq2VJ3X81JbLUicUQ223UGib0sCJuAuXZCqS0iboLHxJXBYCVhZyXW4AmeG0NQfCdA/0?wx_fmt=jpeg\" data-ratio=\"1\" data-w=\"200\"  /\u003e\u003cbr  /\u003e\u003c/pre\u003e","content_source_url":"http://zhidao.baidu.com/link?url=FrOVCJhnq3k_EwbudhsAWOYGou0bAF_eAYbrf1moqgxdfoG0e4w37DvPC-hqfBAGeLnkNTLKuNEJjqp361OnAq","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198201\u0026idx=1\u0026sn=80f0362b032f9c2175816d93b3a17ad2#rd","news_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-21T14:51:23.000+08:00"}]
2016-04-28 15:16:30 INFO WxMenusController index action begin...
2016-04-28 15:16:30 INFO [{"id":242,"title":"Test3633","author":"liug","digest":"联创亚信科技(南京)有限公司","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cp\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e（V1.0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e密级：机密\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e联创亚信科技(南京)有限公司\u003c/p\u003e\u003cp\u003e2012年3月\u003c/p\u003e\u003cp\u003e文 档 信 息\u003c/p\u003e\u003cp\u003e文 档 名 称\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据部LCIMS70软件维护操作规范\u003c/p\u003e\u003cp\u003e归 档 部 门\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文 档 编 号:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eAILK-NBS-DATA-STD-003\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003c/p\u003e\u003cp\u003e文 档 变 更 记 录\u003c/p\u003e\u003cp\u003e版 本 编 号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版 本 日 期\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e作 者\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e说 明\u003c/p\u003e\u003cp\u003eV1.0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2012-3-23\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e胡元皓、沙先伟、李开衡、翟高星、薛建江\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e初稿\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e审 核\u003c/p\u003e\u003cp\u003e审核组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e审核代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e批 准\u003c/p\u003e\u003cp\u003e批准组织\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e批准代表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e签字\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e时间\u003c/p\u003e\u003cp\u003e数据计费产品部\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目 录\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e6\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e7\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e8\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e15\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e16\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e19\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e20\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e23\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e25\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e26\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e27\u003c/p\u003e\u003cp\u003e2.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费程序的运行\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e30\u003c/p\u003e\u003cp\u003e2.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e40\u003c/p\u003e\u003cp\u003e2.2.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e46\u003c/p\u003e\u003cp\u003e2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e内存数据库\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e配置文件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e47\u003c/p\u003e\u003cp\u003e2.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e系统维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e48\u003c/p\u003e\u003cp\u003e2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信告警\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e49\u003c/p\u003e\u003cp\u003e2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e附件\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e2.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台程序相关总表\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e51\u003c/p\u003e\u003cp\u003e3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理和自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务管理\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e55\u003c/p\u003e\u003cp\u003e3.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e57\u003c/p\u003e\u003cp\u003e3.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e60\u003c/p\u003e\u003cp\u003e3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e自服务\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e61\u003c/p\u003e\u003cp\u003e3.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e62\u003c/p\u003e\u003cp\u003e3.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e65\u003c/p\u003e\u003cp\u003e4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e业务受理接口\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e67\u003c/p\u003e\u003cp\u003e4.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e74\u003c/p\u003e\u003cp\u003e4.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e76\u003c/p\u003e\u003cp\u003e5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ePORTAL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e79\u003c/p\u003e\u003cp\u003e5.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e103\u003c/p\u003e\u003cp\u003e5.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e短信开通\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e129\u003c/p\u003e\u003cp\u003e5.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用配置\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e130\u003c/p\u003e\u003cp\u003e5.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动停止\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e应用维护\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e140\u003c/p\u003e\u003cp\u003e5.2.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e版本更新\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e150\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e规范约定\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中${HOME}非特殊说明下，均指lcims用户的主目录。\u003c/p\u003e\u003cp\u003e?\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e本规范中非特殊说明下，均是指以lcims用户登录进行维护。\u003c/p\u003e\u003cp\u003e2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费维护操作\u003c/p\u003e\u003cp\u003e2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius前置机\u003c/p\u003e\u003cp\u003e2.1.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003eRadius1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003eRadius2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1645\u003c/p\u003e\u003cp\u003e1646\u003c/p\u003e\u003cp\u003e1812\u003c/p\u003e\u003cp\u003e1813\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS进程简要说明\u003c/p\u003e\u003cp\u003e2.1.3.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/bin：存放radius可执行程序，启停脚本，监控脚本，模拟发包脚本\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/config：存放radius相关配置文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/log：存放radius产生的日志文件\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/radius/radacct：存放radius产生的原始话单文件\u003c/p\u003e\u003cp\u003e2.1.3.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius进程运行说明\u003c/p\u003e\u003cp\u003e一套完整的radius程序主要由rad_collect、roam_collect、RadiusServer三组进程组成，它们分工协作，共同完成radius包的采集，解析，处理，转发，回包等工作。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e${HOME}/lcims70/radius/bin\u003c/p\u003e\u003cp\u003eUDP包采集与写消息队列执行程序：\u003c/p\u003e\u003cp\u003erad_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e指定端口UDP包采集与预处理执行程序\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e采集的端口号根据配置文件（radmsg.cfg）的内容指定\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e如：rad_collect 1为采集radmsg.cfg中端口组号为1\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e的端口\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e注：关于radmsg.cfg的配置具体看下面的说明。\u003c/p\u003e\u003cp\u003eroam_collect\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e所有radius进程的漫游端口上的UDP包采集与预处理执行程序。\u003c/p\u003e\u003cp\u003erad_killmsg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e清除消息队列执行程序\u003c/p\u003e\u003cp\u003eRADIUS认证与计费执行程序：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003eRadiusServer\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS主执行程序\u003c/p\u003e\u003cp\u003eRadiusVPDN\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eVPDN代维系统主执行程序\u003c/p\u003e\u003cp\u003estartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动RADIUS批执行程序\u003c/p\u003e\u003cp\u003estopradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e停止RADIUS批执行程序\u003c/p\u003e\u003cp\u003erestartradius\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e重启RADIUS批执行程序\u003c/p\u003e\u003cp\u003eradsend\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRADIUS测试发包程序\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eRADIUS自监控执行程序：\u003c/p\u003e\u003cp\u003emsgcount\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e： 消息队列监控程序\u003c/p\u003e\u003cp\u003elcims_alarm \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e： RADIUS告警程序\u003c/p\u003e\u003cp\u003e2.1.3.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer的参数说明\u003c/p\u003e\u003cp\u003e-1 ～ -9 表示从哪个消息读取数据包，1～9对应radmsg.cfg中的消息队列号\u003c/p\u003e\u003cp\u003e-b表示关闭logfile日志文件\u003c/p\u003e\u003cp\u003e-x表示打开x_debug.log日志文件\u003c/p\u003e\u003cp\u003e-j表示此server为计费server\u003c/p\u003e\u003cp\u003e-U表示此server为认证直通\u003c/p\u003e\u003cp\u003e-V表示此server为计费直通。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.3.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius日志说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/log\u003c/p\u003e\u003cp\u003einfo_auth*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e认证RADIUS启停log，每个认证RadiusServer产生一个\u003c/p\u003e\u003cp\u003einfo_acct*\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e计费RADIUS启停log，每个计费RadiusServer产生一个\u003c/p\u003e\u003cp\u003eauth1645.msg\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e消息队列log\u003c/p\u003e\u003cp\u003eerror_info\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eRADIUS SERVER重起信息log\u003c/p\u003e\u003cp\u003eradius$date_[1-5]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e认证RADIUS运行日志\u003c/p\u003e\u003cp\u003eradius$date_[6-8]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e计费RADIUS运行日志\u003c/p\u003e\u003cp\u003eauthok.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证成功的用户信息\u003c/p\u003e\u003cp\u003eauthfail.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eRADIUS SERVER的每天认证失败的用户信息\u003c/p\u003e\u003cp\u003eerrorpacket.yyyymmdd\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eRADIUS SERVER的每天被丢弃的错包信息\u003c/p\u003e\u003cp\u003e2.1.3.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius的detail文件说明\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/radacct\u003c/p\u003e\u003cp\u003eacct.（date）(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e文本方式的用户计费信息文件\u003c/p\u003e\u003cp\u003eerracct.(date)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e(pid)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e异常情况下未计费的用户detail文件\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e二进制方式用户计费信息文件\u003c/p\u003e\u003cp\u003e处理说明：\u003c/p\u003e\u003cp\u003eerracct.(date)(pid)文件计费子系统会回收的。\u003c/p\u003e\u003cp\u003eacct.(date)(pid)文件是用户上网情况的原始记录，可用户查询也可用于重计费。\u003c/p\u003e\u003cp\u003edetail. （date）_(0_23)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 文件计费进程读该文件。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius配置文件配置\u003c/p\u003e\u003cp\u003e目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(RADIUS)/config\u003c/p\u003e\u003cp\u003e2.1.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003esysconfig\u003c/p\u003e\u003cp\u003e文件名：sysconfig\u003c/p\u003e\u003cp\u003e作用：Radius系统配置文件\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e#数据库的连接出现问题时，是否直接让帐号用户认证通过\u003c/p\u003e\u003cp\u003edirectpass = no\u003c/p\u003e\u003cp\u003e#省内NAS SECRET\u003c/p\u003e\u003cp\u003elocalsecret = xxxxxx\u003c/p\u003e\u003cp\u003e#省内域名\u003c/p\u003e\u003cp\u003elocalrealm = js.cn\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e#RadiusServer的服务类型是宽带还是窄带等\u003c/p\u003e\u003cp\u003e#类型有：\u003c/p\u003e\u003cp\u003e#narrowband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e窄带\u003c/p\u003e\u003cp\u003e#broadband\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e宽带\u003c/p\u003e\u003cp\u003e#ALL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e宽窄带合一\u003c/p\u003e\u003cp\u003eService = ALL\u003c/p\u003e\u003cp\u003e#默认域名（即没有注册的域名）允许的被叫\u003c/p\u003e\u003cp\u003eDefault_Called = 163,17999,179,16300,16306,16388,169,1183300,9163\u003c/p\u003e\u003cp\u003e#用户默认的最大上网时长\u003c/p\u003e\u003cp\u003eTimeout = 8640000\u003c/p\u003e\u003cp\u003e#用户默认的最大上网流量（K为单位）\u003c/p\u003e\u003cp\u003eFlowout = 1073741824\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e#交换机地址\u003c/p\u003e\u003cp\u003e\u0026nbsp;alteon1 = 192.168.53.1\u003c/p\u003e\u003cp\u003ealteon2 = 192.168.53.2\u003c/p\u003e\u003cp\u003ealteon3 = 192.168.53.3\u003c/p\u003e\u003cp\u003e#是否文件计费\u003c/p\u003e\u003cp\u003eFileAcct = yes\u003c/p\u003e\u003cp\u003e#文件计费记录文件\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/OnlineConfig.ini\u003c/p\u003e\u003cp\u003eFileAcctConfig = ../config/RatingConfig.ini\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile\u003c/p\u003e\u003cp\u003e文件名：authfile\u003c/p\u003e\u003cp\u003e作用：域名配置文件。配置域名的认证类型和转发地址，其中认证类型有：\u003c/p\u003e\u003cp\u003eDATABASE:\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e表示本地认证\u003c/p\u003e\u003cp\u003eRADIUS\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e表示漫游认证\u003c/p\u003e\u003cp\u003eDeny\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; 表示拒绝认证\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e域名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e处理AATV\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e地址\u003c/p\u003e\u003cp\u003eNULL\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;DEFAULT \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eDATABASE \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;127.0.0.1\u003c/p\u003e\u003cp\u003e\u0026nbsp;peap.com \u0026nbsp; \u0026nbsp; \u0026nbsp; RADIUS \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; 221.130.120.179\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e注：现在域名信息一般通过业务系统存放在数据库中BD_AUTHTYPE表中，此文件中域名配置优先级高于BD_AUTHTYPE。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eauthfile.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的域名配置文件。该文件格式跟authfile.abn一样，包括authfile文件和数据库中的所有的域名信息，每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients\u003c/p\u003e\u003cp\u003e作用：客户端(NAS,PROXY RADIUS)配置文件。通常用来配置漫游转发设备的地址信息。现在本地客户端信息通过业务系统存放在数据库中BD_NAS表中，而漫游的地址必须存放在此文件中。如果有新的客户端要加入，请在加入后重新启动radius进程。\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp; 源地址\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e密钥\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e类型\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e版本\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; 127.0.0.1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003exxxxx \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003etype = nas \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003ev1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eclients.abn\u003c/p\u003e\u003cp\u003e作用：直通时使用的客户端(NAS,PROXY RADIUS)配置文件。该文件格式跟clients一样，包括clients文件和数据库中所有的设备地址信息。此文件每天维护。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eradmsg.cfg\u003c/p\u003e\u003cp\u003e作用：消息队列配置文件。rad_collect和RadiusServer启动时，从该文件读取消息队列配置信息。\u003c/p\u003e\u003cp\u003e消息队列号：对应于每个RadiusServer启动参数-M后的数字。起了多少个RadiusServer，就有多少个消息队列号。RadiusServer根据消息队列号去对应的消息队列中读取报文信息进行处理。\u003c/p\u003e\u003cp\u003e采集端口号：程序监听的udp端口号。\u003c/p\u003e\u003cp\u003e端口组号：对应于rad_collect的启动参数，程序启动时监听在该端口组号对应的采集端口号上。有几个不同的端口组号，就对应几个带不同参数的rad_collect进程。\u003c/p\u003e\u003cp\u003e一个rad_collect进程，监听在一个udp端口上，可以将采集到的数据包根据同一个端口组号对应的消息队列号，写入到不同的消息队列中\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e消息队列文件名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e消息队列号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e采集端口号\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e端口组号\u003c/p\u003e\u003cp\u003e../config/message1 \u0026nbsp; \u0026nbsp; \u0026nbsp; 1 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1812 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e1\u003c/p\u003e\u003cp\u003e../config/message2 \u0026nbsp; \u0026nbsp; \u0026nbsp; 2 \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1813 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e2\u003c/p\u003e\u003cp\u003e../config/message11 \u0026nbsp; \u0026nbsp; \u0026nbsp;11 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1645 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e3\u003c/p\u003e\u003cp\u003e../config/message12 \u0026nbsp; \u0026nbsp; \u0026nbsp;12 \u0026nbsp; \u0026nbsp; \u0026nbsp;\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e1646 \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enasfile\u003c/p\u003e\u003cp\u003e作用：本地nas信息配置文件。该文件包含所有本地nas资料，直通时通过此文件读取本地nas信息。此文件每天维护\u003c/p\u003e\u003cp\u003eareano：属地号\u003c/p\u003e\u003cp\u003edevice：设备型号\u003c/p\u003e\u003cp\u003eaccesstype：接入方式，1表示窄带接入，2表示宽带接入\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003e#ip\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003eareano\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edevice\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eaccesstype\u003c/p\u003e\u003cp\u003e192.168.4.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e0001\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eLinkage\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e 2\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003edictionary\u003c/p\u003e\u003cp\u003e作用：RADIUS SERVER数据字典。记录目前可以处理的RADIUS属性\u003c/p\u003e\u003cp\u003e标准属性的写法\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e \u0026nbsp; Type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eATTRIBUTE \u0026nbsp; \u0026nbsp; \u0026nbsp; NAS-Port \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;5 \u0026nbsp; \u0026nbsp; \u0026nbsp; integer (0, 0)\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e这表示5号标准属性，属性名称为NAS-Port，数据类型为Int，括号中的内容表示在认证成功和认证失败的报文中是否要包括此属性，‘1’表示最多包括一个，‘0’表示不包括，‘*’表示可包含多个，不写默认为（0,0）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e厂商的私有属性写法（26号属性）\u003c/p\u003e\u003cp\u003e厂商名.attr\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e属性名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e \u0026nbsp;type\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e \u0026nbsp;数据类型\u003c/p\u003e\u003cp\u003eLinkage.attr \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eLcims-User-Type \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;202 \u0026nbsp; \u0026nbsp; integer\u003c/p\u003e\u003cp\u003e此处的厂商名一定要在vendors中定义，见1.4.9\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003evendors\u003c/p\u003e\u003cp\u003e作用：记录目前可处理的厂商属性标识。在业务系统中各类接入设备的供应商都要在此文件中定义\u003c/p\u003e\u003cp\u003e标准格式：\u003c/p\u003e\u003cp\u003eCisco.attr Cisco.value 9 Cisco\u003c/p\u003e\u003cp\u003e这表示在dictionary文件中用Cisco.attr标识的属性和以Cisco.value标识的属性值为Cisco的私有属性（26号属性所带的），9表示为Cisco的厂商代码（可见rfc1700）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.4.10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eusers\u003c/p\u003e\u003cp\u003e作用：用户基本上网授权属性配置文件。第一栏是用户名，同一行对应的是认证请求条件，通常为密码。下面对应的是在满足认证请求条件的前提下，RadiusServer需要授权给设备的属性列表。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e如：窄带用户网内有权返回\u003c/p\u003e\u003cp\u003eldimstest \u0026nbsp; \u0026nbsp; \u0026nbsp; Password = \u0026quot;test\u0026quot;\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Service-Type = Framed,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Framed-Protocol = PPP,\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;Session-Timeout = 10\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius系统程序的运行\u003c/p\u003e\u003cp\u003e2.1.5.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的startradius即可启动相应的radius server；执行bin目录下的stopradius可停掉radius server；执行restartradius可重起radius server。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e直通方法：\u003c/p\u003e\u003cp\u003e1. 核对直通所需的各配置文件是否正常。包括：authfile.abn，clients.abn，nasfile；\u003c/p\u003e\u003cp\u003e2. 如果配置文件非正常，或数据与最新内容有出入，则修改配置或重新生成最新配置文件；\u003c/p\u003e\u003cp\u003e3. 修改配置文件sysconfig，directpass = yes 并保存；\u003c/p\u003e\u003cp\u003e4. 重启radius进程。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.5.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e检查radius$date_[n]日志，有全部的本地nas信息和域名信息注册资料，并有“Init MSGQ Succeed!”字样，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列检查\u003c/p\u003e\u003cp\u003e在radius前置机任何路径输入ipcs –qo命令，查看消息队列数是否与RadiusServer进程数相等，是否有堵塞情况。若消息队列数与RadiusServer进程数相等，且无堵塞情况，表明该检查结果正确。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e使用测试账号模拟发认证包，检查authok和authfail日志，如果有对应记录，且认证结果符合预期，表明该检查结果正确。模拟发计费包后，检查acct文件，如果有对应记录，表明该检查结果正确；检查detail文件，如果文件存在且更新时间为发包时间，则该检查结果正确。\u003c/p\u003e\u003cp\u003e三步检查都成功，表明radius进程启动成功。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius应用程序维护\u003c/p\u003e\u003cp\u003e2.1.6.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius crontab配置\u003c/p\u003e\u003cp\u003ecrontab设置：\u003c/p\u003e\u003cp\u003e#radius进程、消息队列监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/radius/monitor/monitor_radius.sh \u0026nbsp;\u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/monitor_radius.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时重启radius进程\u003c/p\u003e\u003cp\u003e40 06 * * * ${HOME}/lcims70/radius/bin/restartradius \u0026gt; ${HOME}/lcims70/radius/log/restart.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份detail文件\u003c/p\u003e\u003cp\u003e34 1 * * * ${HOME}/lcims70/radius/monitor/bakdetail.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakdetail.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时备份日志文件\u003c/p\u003e\u003cp\u003e10 0 * * * ${HOME}/lcims70/radius/monitor/bakradiuslog.sh \u0026gt;\u0026gt; ${HOME}/lcims70/radius/log/bakradiuslog.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#定时获取直通所需nas和域名信息\u003c/p\u003e\u003cp\u003e22 5 * * * ${HOME}/lcims70/radius/config/getnas.sh \u0026gt; ${HOME}/lcims70/radius/config/nas.log 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius监控脚本monitor_radius.sh详解\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh流程图\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_radius.sh阀值说明\u003c/p\u003e\u003cp\u003eMaxBlock：消息队列堵塞个数阀值，默认值30\u003c/p\u003e\u003cp\u003eMsgCheckWait：消息队列下次检查等待时间，默认值3秒\u003c/p\u003e\u003cp\u003eRestartCheckTimes：消息队列连续检查次数阀值，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassCheckTimes：普通重启次数阀值，重启次数超过这个阀值就直通，默认值5次\u003c/p\u003e\u003cp\u003eDirectPassHoldTimes：直通时间阀值，超过这个时间就恢复非直通，默认值5分钟\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius告警并自动重启的条件\u003c/p\u003e\u003cp\u003ea)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞个数超过配置阀值；\u003c/p\u003e\u003cp\u003eb)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包不通或认证失败。\u003c/p\u003e\u003cp\u003e4、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动直通的条件\u003c/p\u003e\u003cp\u003eRadius第一次重启到radius恢复正常（消息队列不堵）之前，重启次数超过配置阀值。\u003c/p\u003e\u003cp\u003e5、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e触发radius自动的从直通中恢复的条件\u003c/p\u003e\u003cp\u003e直通时间大于配置阀值。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.6.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius短信告警分析及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e消息队列堵塞\u003c/p\u003e\u003cp\u003e告警内容举例：”radius01:radius restart1.auth msg block 231”\u003c/p\u003e\u003cp\u003e告警原因：消息队列堵塞，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大量认证包，造成radius进程处理不过来。此种情况一般不会发生；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理缓慢，造成此结果通常有两个原因：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e瞬时大批量用户资料更新，造成同步程序占用过多磁盘io，导致认证程序取用户资料缓慢；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e数据库出现问题，造成在线程序取用户在线资料失败或缓慢\u003c/p\u003e\u003cp\u003ec）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e某个RadiusServer进程宕了\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警信息短时间内只收到一条，radius进程已自行重启，无需登录主机查看；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若同一台radius主机同一类型告警短信短时间内连续出现，需做以下步骤的检查：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录发生告警的radius主机，检查是否每个RadiusServer进程都在，若有进程消失，说明是radius的问题。重启radius后若同样的错误还是会发生，改直通并联系开发人员查错；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若所有消息队列都在堵塞，登录发生告警的radius主机对应的billing主机，检查认证日志，查看一个认证包的处理时间，若处理时间明显长于平时（毫秒级），继续检查是哪一步占用时间比较长。根据上述分析，通常占用时间长的会是取用户资料或查在线。\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是认证程序取用户资料时间过长，修改同步配置，重启同步配置。修改方法见下文\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e若是查询在线时间过长，尝试重启在线和认证程序。若还是没效果，启动nodb认证模式，登陆数据库主机检查数据库CPU及磁盘使用情况，确定数据库异常原因，联系相关人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包无回应\u003c/p\u003e\u003cp\u003e告警内容举例：“radius restart 1.auth abnormal”\u003c/p\u003e\u003cp\u003e告警原因：radius监控模拟发包无回应，可能的原因有：\u003c/p\u003e\u003cp\u003ea）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadiusServer进程宕了；\u003c/p\u003e\u003cp\u003eb）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e后台认证程序处理时间超过模拟发包软件的超时时间，而造成这一结果的原因与消息队列堵塞原因类似。\u003c/p\u003e\u003cp\u003e处理方法：同消息队列堵塞\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e磁盘空间告警\u003c/p\u003e\u003cp\u003e告警内容举例：“raidust:direcroty:/radius--used:80%s”\u003c/p\u003e\u003cp\u003e告警原因：日志或备份文件过大，导致磁盘剩余空间不足\u003c/p\u003e\u003cp\u003e处理方法：\u003c/p\u003e\u003cp\u003ei）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查是否有过大文件，如软件安装程序，抓包文件等，若有，则视情况进行清理。查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的radius前缀日志文件，检查磁盘空间情况，若还是高于告警阀值，则执行下一步；\u003c/p\u003e\u003cp\u003eiii）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e删除或移除前一天的acct和detail文件。\u003c/p\u003e\u003cp\u003eiv）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查定时清理磁盘脚本，是否没有定时执行。若定时执行，重新评估该脚本是否需要根据实际情况加以修改。\u003c/p\u003e\u003cp\u003e2.1.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eRadius版本更新方法及步骤\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e从测试机往每台radius前置机的radius/bin目录ftp上传新的RadiusServer程序，上传时更名为RadiusServer.new\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登陆radius前置机，进入radius/bin目录，执行以下操作：\u003c/p\u003e\u003cp\u003emv RadiusServer RadiusServer.${date}\u003c/p\u003e\u003cp\u003emv RadiusServer.new RadiusServer\u003c/p\u003e\u003cp\u003echmod +x RadiusServer\u003c/p\u003e\u003cp\u003erestartradius\u003c/p\u003e\u003cp\u003e其中 ${date} 为更新时间\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e更新后检查\u003c/p\u003e\u003cp\u003e1）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看日志，检查程序启动情况；\u003c/p\u003e\u003cp\u003e2）\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e模拟发包，分别检查正常业务和新版本更新业务。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件缓冲计费\u003c/p\u003e\u003cp\u003e2.1.8.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费系统概述\u003c/p\u003e\u003cp\u003e随着用户数量的不断增加，计费包的数量也不断的加大，原来的计费方式为直接连接计费Server进行计费，一但数据库出现问题或者包数过多的话就会造成计费包丢失，而且由于radius要等待计费Server计费完毕才能回应信息给接入设备，一但超时，接入设备会再次重发计费包，造成计费系统更大的处理负担。\u003c/p\u003e\u003cp\u003e现在准备增加文件缓冲计费的模块，Radius接收到计费包后写入计费文件，然后就给接入设备回应，而文件缓冲计费程序从计费文件中读出计费信息传给计费server进行计费，这样用文件作为缓冲池可以在计费包多的时候先把计费包记录下来，再去计费，不会造成丢包。\u003c/p\u003e\u003cp\u003e由于读取计费文件是实时的计费不会有太长时间的等待，基本可以在几秒内将用户的清单入库。\u003c/p\u003e\u003cp\u003e2.1.8.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费目录说明\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate：FileRating程序主目录\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive：FileAlive程序主目录（目前只有江苏电信版本有）\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online：FileOnline程序主目录\u003c/p\u003e\u003cp\u003e其中：\u003c/p\u003e\u003cp\u003ebin：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放可执行程序，启停脚本，监控脚本\u003c/p\u003e\u003cp\u003econfig：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放配置文件\u003c/p\u003e\u003cp\u003elog：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e存放日志文件\u003c/p\u003e\u003cp\u003e2.1.8.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费进程说明\u003c/p\u003e\u003cp\u003e文件计费进程，由FileOnline，FileRating，FileAlive三个进程组成，分别将radius收到的计费包发送给不同的后台程序进行处理。其中FileOnline和FileRating必须起，FileAlive根据实际情况加以启停。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003eFileOnline：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_ONLINE发送计费包，用于生成在线信息；\u003c/p\u003e\u003cp\u003eFileRating：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读Radius的detail文件，向AB_RATING发送计费包，用于生成清单信息；\u003c/p\u003e\u003cp\u003eFileAlive：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e读取radius产生的计费原始话单，将话单中的起始包，中间包和结束包发送给AB_ALIVE；\u003c/p\u003e\u003cp\u003eFileStatus：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e用于监控文件计费进程处理速度。\u003c/p\u003e\u003cp\u003e2.1.8.4\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费配置文件配置\u003c/p\u003e\u003cp\u003e配置文件：\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/rate/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/alive/config/system.cfg\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e$(HOME)/lcims70/fileacct/online/config/system.cfg\u003c/p\u003e\u003cp\u003e作用：文件计费配置文件，配置程序相关路径、日志级别、线程数等。\u003c/p\u003e\u003cp\u003e标准格式：如下\u003c/p\u003e\u003cp\u003e[LOGFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件配置\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/fileacct/rate/log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#日志文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME =file.log\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\u003c/span\u003e#日志文件名\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;LEVEL = NOTE\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\t\t\t\u003c/span\u003e#日志级别 （注1）\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[RECORDFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件配置 （注2）\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/config\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Record配置文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;FILENAME = RatingConfig.ini\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#Record配置文件名\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[DATAFILE]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#Radius的detail文件路径\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;DIRECTORY =/radius/lcims/lcims70/radius/radacct\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e[THREADNUM]\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e#线程数\u003c/p\u003e\u003cp\u003e\u0026nbsp; \u0026nbsp; \u0026nbsp;NUMBER = 4\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e注1：日志级别分为ALL、DEBUG、NOTE、WARN、ERROR，一般情况下使用NOTE级别\u003c/p\u003e\u003cp\u003eALL：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印全部日志。\u003c/p\u003e\u003cp\u003eDEBUG：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e打印调试日志。该日志级别会打印出detail文件中每一个包的发送及回应日志。日志文件会非常大，且在一定程度上影响到程序的效率。建议在调试阶段使用。\u003c/p\u003e\u003cp\u003eNOTE：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印普通日志。该日志级别会打印出文件计费进程读取每个detail文件的开始时间和读取完成时间。正常情况下建议使用该日志级别。\u003c/p\u003e\u003cp\u003eWARN：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印告警日志。\u003c/p\u003e\u003cp\u003eERROR：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e打印错误日志。\u003c/p\u003e\u003cp\u003e注2：Record配置文件为radius和文件计费共同使用。Radius每新写一个detail文件，将该detail文件名写入Record文件；文件计费程序启动时读取Record文件，获得上次读的detail文件名，及上次读到的位置。每处理一行detail记录，将文件偏移量移到该记录下一条开始处。详见文件计费详细设计文档。\u003c/p\u003e\u003cp\u003e2.1.8.5\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费日志说明\u003c/p\u003e\u003cp\u003e目录：\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/rate/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/online/log\u003c/p\u003e\u003cp\u003e${HOME}/lcims70/fileacct/alive/log\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003efile.log：记录文件计费启动情况，运行情况。\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:18 [NOTE ] Creating ThreadPool ..............\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Current Create 6 Thread,0 Failure\u003c/p\u003e\u003cp\u003e2011/12/12 14:50:25 [NOTE ] Now Read Data File [/data1/lcims/lcims70/radius/radacct/detail.20111212_11]!\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e 其中：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eCreating ThreadPool表示正在建立线程\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eCurrent Create 6 Thread,0 Failure 表示6个线程全部建立成功\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003eNow Read Data File 表示正在处理的detail文件名\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003eFileRating.log：文件计费启停日志。\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:15 Stop FileRating(pid=9055)\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003ethread created ok!\u003c/p\u003e\u003cp\u003e2011-12-16 01:25:26 FileRating(pid=18373) started.\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.1.8.6\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费启停方法\u003c/p\u003e\u003cp\u003e系统配置好后，启动bin目录下的start.sh即可启动相应的文件计费进程；执行bin目录下的stop.sh可停掉文件计费进程。\u003c/p\u003e\u003cp\u003e2.1.8.7\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e启动后检查\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程检查\u003c/p\u003e\u003cp\u003e以FileOnline为例，运行start.sh后，若启动成功，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline(pid=24504) started.\u003c/p\u003e\u003cp\u003e若启动失败，启动脚本会打印出：\u003c/p\u003e\u003cp\u003eStarting FileOnline ...\u003c/p\u003e\u003cp\u003eFileOnline failed to start, check log for details!\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e日志检查\u003c/p\u003e\u003cp\u003e启动后，检查file.log日志，若启动成功，日志显示“Current Create 6 Thread,0 Failure”，若启动失败，日志显示“Create ThreadPool Failure!”。失败原因比较复杂多变，建议联系开发人员。\u003c/p\u003e\u003cp\u003e3、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e发包测试\u003c/p\u003e\u003cp\u003e模拟发送计费包，检查文件计费进程对计费包进行处理。若后台在线或计费程序收到相应的计费包，启动成功。\u003c/p\u003e\u003cp\u003e2.1.9\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费应用程序维护\u003c/p\u003e\u003cp\u003e2.1.9.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费crontab配置\u003c/p\u003e\u003cp\u003e#FileOnline监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileOnline 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileRating监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileRating 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e#FileAlive监控\u003c/p\u003e\u003cp\u003e* * * * * ${HOME}/lcims70/fileacct/monitor_fileacct.sh FileAlive 2\u0026gt;\u0026amp;1\u003c/p\u003e\u003cp\u003e2.1.9.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费监控脚本说明\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003emonitor_fileacct.sh\u003c/p\u003e\u003cp\u003e参数：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程名\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e此脚本可用来监控文件计费进程的运行情况。运行情况分为两类：\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e检查文件计费进程是否存在，若不存在，尝试重启进程并告警；\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e每30分钟检查文件计费进程的处理效率，若出现大量拥堵情况则告警。\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e脚本名：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003estatus.sh\u003c/p\u003e\u003cp\u003e位置：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003ebin\u003c/p\u003e\u003cp\u003e作用：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e查看文件计费进程的工作状态。\u003c/p\u003e\u003cp\u003e示例：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e$ status.sh\u003c/p\u003e\u003cp\u003eVersion:1\u003c/p\u003e\u003cp\u003eCurrent have [1/4] Record\u003c/p\u003e\u003cp\u003eFirst Block 28\u003c/p\u003e\u003cp\u003eCurrent Block 580\u003c/p\u003e\u003cp\u003eprocess file \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :detail.20111108_10\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前处理的detail文件\u003c/p\u003e\u003cp\u003efile size(bytes) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#此detail文件的大小\u003c/p\u003e\u003cp\u003eprocess location(bytes)\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e:5568\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#进程已处理到的地方\u003c/p\u003e\u003cp\u003eremain packets \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :0\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\t\u003c/span\u003e#剩下未处理的包数\u003c/p\u003e\u003cp\u003eprocess time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :20111108105240\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\u003c/span\u003e#进程处理到的包的开始时间或结束时间\u003c/p\u003e\u003cp\u003enow time \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp;:20120216091033\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\u003c/span\u003e#当前时间\u003c/p\u003e\u003cp\u003edelay(seconds) \u0026nbsp; \u0026nbsp; \u0026nbsp; \u0026nbsp; :8633873\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\t\t\t\u003c/span\u003e#延时时长\u003c/p\u003e\u003cp\u003e说明：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003eprocess time：当前处理的为开始包，则此时间为开始包的开始时间；当前处理的为结束包，则此事件为结束包的结束时间。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003edelay：\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003enow time和process time的时间间隔，正常生产环境中，此值一般不会超过1分钟。\u003c/p\u003e\u003cp\u003e\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e2.1.9.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e文件计费短信告警及处理方法\u003c/p\u003e\u003cp\u003e1、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e进程停止\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01`:FileRating,restart!”\u003c/p\u003e\u003cp\u003e告警原因：文件计费进程停止，可能的原因有：程序coredump\u003c/p\u003e\u003cp\u003e处理方法：若同样告警短信短时间内只有一条，可不用处理。后期联系开发人员检查告警发生原因。若同样告警短信短时间内不停出现，检查文件计费后台对应的计费程序是否运行正常。若对应的计费程序运行不正常，尝试重启计费程序，再重启文件计费程序。若仍未能启动成功，立即联系开发人员。\u003c/p\u003e\u003cp\u003e2、\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e大量拥堵\u003c/p\u003e\u003cp\u003e告警内容举例：“radius01 FileRating delay 100 seconds (1000 packets).”\u003c/p\u003e\u003cp\u003e告警原因：后台计费程序处理缓慢。该情况通常在60系统发生，70系统在入库程序做了改进，此种告警一般不会发生。\u003c/p\u003e\u003cp\u003e2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费主机\u003c/p\u003e\u003cp\u003e2.2.1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e安装主机\u003c/p\u003e\u003cp\u003e主机名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主机IP\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e登录名\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e主目录\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e端口\u003c/p\u003e\u003cp\u003ebilling1\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.11\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003ebilling2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e10.133.3.12\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003elcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e/lcims\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.2\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e目录结构\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.3\u003cspan class=\"Apple-tab-span\" style=\"white-space:pre\"\u003e\t\u003c/span\u003e认证计费系统描述\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e\u003cp\u003e2.2.4\u003cspan class=\"Apple-tab-span\" style=\"white-space: pre;\"\u003e\t\u003c/span\u003e认证计费描述与配置\u003c/p\u003e\u003cp\u003e\u003cbr/\u003e\u003c/p\u003e","content_source_url":"https://www.baidu.com/","cover_file_id":705,"content_url":null,"news_id":"1461550688","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxFSkA7yfSHunR0hZhaJbbpo","wx_official_account_id":1,"created_at":"2016-04-27T16:00:21.000+08:00","updated_at":"2016-04-27T16:00:21.000+08:00"},{"id":171,"title":"test","author":"mkm","digest":"test test","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"111","content_source_url":"http://baidu.com","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=401982286\u0026idx=1\u0026sn=e19f9fa4af8c873c348c1378387a4ea1#rd","news_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","index":0,"media_id":"7ntyVQZANY_KliWKhQ83dFNDSprw1c9tLH0sSIp_NaA","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-22T15:32:22.000+08:00"},{"id":208,"title":"图文消息测试1122-33-44","author":"Test","digest":"此处是图文消息的正文","thumb_media_id":"qotJ088R2YkTUAS5SPBMxAP5hMwrriSblwVBMlx0ZYk","show_cover_pic":0,"content":"\u003cp\u003e此处是图文消息的正文\u003cbr  /\u003e\u003c/p\u003e\u003cp\u003e\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"http://mmbiz.qpic.cn/mmbiz/dceprvV3vaLMGEy3ticJLn8mRaOwDicgCXxZ69Quw9orNYUsSB0w7YHSlVU9jIXWRmYs1cC2dKefQAfuUu5GCqzw/0?wx_fmt=jpeg\" data-ratio=\"0.6348920863309353\" data-w=\"\"  /\u003e\u003cbr  /\u003e\u003c/p\u003e","content_source_url":"http://www.sohu.com","cover_file_id":717,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198290\u0026idx=1\u0026sn=c9ae1956654812f3273b2a0deec2deba#rd","news_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxHzc1k9BYAd1KMgTp6bUjK0","wx_official_account_id":1,"created_at":"2016-04-22T15:04:24.000+08:00","updated_at":"2016-04-22T16:54:53.000+08:00"},{"id":170,"title":"logrotate","author":"test","digest":"测试","thumb_media_id":"qotJ088R2YkTUAS5SPBMxFihxN4uzqR5LeTpUM71Fy8","show_cover_pic":0,"content":"\u003cpre accuse=\"aContent\" class=\"best-text mb-10\" style=\"\"\u003e你的配置虽然简单还是正确的\u003cbr  /\u003elogrotate 是帮助 rotate 日志文\u003cimg data-s=\"300,640\" data-type=\"jpg\" data-src=\"https://mmbiz.qlogo.cn/mmbiz/dceprvV3vaLUZTzZuvWExkdyq2VJ3X81JbLUicUQ223UGib0sCJuAuXZCqS0iboLHxJXBYCVhZyXW4AmeG0NQfCdA/0?wx_fmt=jpeg\" data-ratio=\"1\" data-w=\"200\"  /\u003e\u003cbr  /\u003e\u003c/pre\u003e","content_source_url":"http://zhidao.baidu.com/link?url=FrOVCJhnq3k_EwbudhsAWOYGou0bAF_eAYbrf1moqgxdfoG0e4w37DvPC-hqfBAGeLnkNTLKuNEJjqp361OnAq","cover_file_id":705,"content_url":"http://mp.weixin.qq.com/s?__biz=MzI0MDExMjE5Ng==\u0026mid=502198201\u0026idx=1\u0026sn=80f0362b032f9c2175816d93b3a17ad2#rd","news_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","index":0,"media_id":"qotJ088R2YkTUAS5SPBMxIArUhGwmCuqzxyYSrAGRIU","wx_official_account_id":1,"created_at":"2016-04-22T10:42:37.000+08:00","updated_at":"2016-04-21T14:51:23.000+08:00"}]
2016-06-15 14:16:00 INFO WxMenusController index action begin...
2016-06-15 14:42:57 INFO WxMenusController index action begin...
2016-06-15 14:45:27 INFO WxMenusController index action begin...
2016-06-15 14:45:32 INFO WxMenusController index action begin...
2016-06-15 14:45:47 INFO WxMenusController index action begin...
2016-06-15 16:09:35 INFO WxMenusController index action begin...
2016-06-15 16:12:59 INFO WxMenusController index action begin...
2016-06-16 10:02:24 INFO WxMenusController index action begin...
2016-07-14 10:57:32 INFO WxMenusController index action begin...
2016-07-14 10:57:36 INFO WxMenusController index action begin...
2016-09-07 15:37:06 INFO WxMenusController index action begin...
2016-09-19 16:02:27 INFO WxMenusController index action begin...
2016-09-19 16:02:30 INFO WxMenusController index action begin...
2016-09-19 16:02:54 INFO WxMenusController index action begin...
